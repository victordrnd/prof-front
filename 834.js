"use strict";(self.webpackChunkprof_front=self.webpackChunkprof_front||[]).push([[834],{4172:(N,y,r)=>{r.d(y,{w:()=>s});var u=r(655),i=r(5e3),t=r(7309),Z=r(2466),z=r(8669),C=r(9808),M=r(1894);function O(l,h){if(1&l&&(i.ynx(0),i.TgZ(1,"div",13)(2,"p",14),i._uU(3),i.qZA()(),i.BQk()),2&l){const d=h.$implicit;i.xp6(3),i.Oqu(d.hour)}}function T(l,h){if(1&l&&(i.TgZ(0,"div",9)(1,"div",10)(2,"div",11),i.YNc(3,O,4,1,"ng-container",12),i.qZA()()()),2&l){const d=i.oxw();i.xp6(3),i.Q6J("ngForOf",d.availabilities.schedule)}}function A(l,h){if(1&l){const d=i.EpF();i.ynx(0),i.TgZ(1,"div",19),i.NdJ("click",function(){const j=i.CHM(d).$implicit;return i.oxw(2).toggleEnabled(j)}),i._UZ(2,"p"),i.qZA(),i.BQk()}if(2&l){const d=h.$implicit;i.xp6(1),i.ekj("active",!d.disabled)}}function S(l,h){if(1&l&&(i.TgZ(0,"div",15)(1,"div",16),i._uU(2),i.ALo(3,"titlecase"),i.qZA(),i.TgZ(4,"div",17)(5,"div",18),i.YNc(6,A,3,2,"ng-container",12),i.qZA()()()),2&l){const d=h.$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,2,d.key)," "),i.xp6(4),i.Q6J("ngForOf",d.schedule)}}let s=(()=>{class l{constructor(d,f,g){this.calendarService=d,this.translate=f,this.notificationService=g}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){this.availabilities=yield this.calendarService.getMyAvailabilities().toPromise()})}toggleEnabled(d){d.disabled=!d.disabled}saveAvailabilities(){this.calendarService.saveAvailabilities(this.availabilities.days).toPromise().then(d=>{this.notificationService.primary(this.translate.instant("settings.success_description"),this.translate.instant("shared.success"))}).catch(d=>{this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})}}return l.\u0275fac=function(d){return new(d||l)(i.Y36(t.o),i.Y36(Z.sK),i.Y36(z.quB))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-teacher-availabilities"]],decls:16,vars:8,consts:[[1,"text-center","mt-3"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngFor","ngForOf"],[1,"d-flex","flex-row-reverse"],["nbButton","","status","primary",1,"m-4",3,"click"],[1,"mx-5"],[1,"row","mx-5"],[1,"col","col-1","middle","active","text-white"],[1,"col","col-1","middle","bg-white","offset-1"],[1,"row"],[1,"offset-1","col-11"],["nz-row","",1,"px-2"],[4,"ngFor","ngForOf"],["nz-col","","nzFlex","auto"],[1,"text-center"],[1,"row","mt-3"],[1,"col"],[1,"col-11"],["nz-row","",1,"px-2","rounded"],["nz-col","","nzFlex","auto",1,"border-custom","text-center","col","middle","text-white",3,"click"]],template:function(d,f){1&d&&(i.TgZ(0,"h3",0),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.YNc(3,T,4,1,"div",1),i.YNc(4,S,7,4,"div",2),i.TgZ(5,"div",3)(6,"button",4),i.NdJ("click",function(){return f.saveAvailabilities()}),i._uU(7),i.ALo(8,"translate"),i.qZA()(),i.TgZ(9,"h6",5),i._uU(10,"L\xe9gende"),i.qZA(),i.TgZ(11,"div",6)(12,"div",7),i._uU(13,"Disponible"),i.qZA(),i.TgZ(14,"div",8),i._uU(15," Non Disponible "),i.qZA()()),2&d&&(i.xp6(1),i.Oqu(i.lcZ(2,4,"header.availabilities")),i.xp6(2),i.Q6J("ngIf",f.availabilities),i.xp6(1),i.Q6J("ngForOf",null==f.availabilities?null:f.availabilities.days),i.xp6(3),i.Oqu(i.lcZ(8,6,"shared.save")))},directives:[C.O5,M.SK,C.sg,M.t3,z.DPz],pipes:[Z.X$,C.rS],styles:[".col[_ngcontent-%COMP%]{padding:16px 0;text-align:center;border-radius:0;min-height:30px;margin-top:8px;margin-bottom:8px}.middle[_ngcontent-%COMP%]{background:#fff;cursor:pointer}.middle[_ngcontent-%COMP%]:hover{background-color:#dbf0ee}.middle.active[_ngcontent-%COMP%]{background-color:var(--tag-filled-primary-hover-background-color)!important}.border-custom[_ngcontent-%COMP%]{border-left:1px solid #f6f9fc}"]}),l})()},7834:(N,y,r)=>{r.r(y),r.d(y,{TeacherModule:()=>Zt});var u=r(9808),i=r(325),t=r(5e3),Z=r(263),z=r(1941);let C=(()=>{class n{constructor(e){this.userService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-teacher-dashboard"]],decls:4,vars:1,consts:[[1,"row","mx-0"],[1,"col-12"],[1,"m-4"],[3,"isTeacher"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-calendar",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("isTeacher",!0))},directives:[z.e],styles:[""]}),n})();var M=r(8393),O=r(9470),T=r(4573),A=r(4219),S=r(3087),s=r(8669),l=r(2466);let h=(()=>{class n{constructor(e,o){this.userService=e,this.socket=o}ngOnInit(){(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))&&(this.mobile=!0)}logout(){this.userService.purgeAuth(),document.location.reload()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.e),t.Y36(M.sk))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-teacher"]],decls:36,vars:18,consts:[[1,"layout"],["nzCollapsible","",3,"nzCollapsed","nzWidth","nzCollapsedWidth"],["nz-menu","","nzMode","inline",1,"w-100"],["nz-menu-item","","routerLink","dashboard",1,"mt-0"],["nz-icon","","nzType","home","nzTheme","outline"],["nz-submenu","","nzTitle","Mes cours","nzIcon","book","nzOpen",""],["nz-menu-item","","routerLink","lessons"],["nz-menu-item","","routerLink","lessons/history"],["nz-submenu","","nzTitle","Mon profil","nzIcon","user","nzOpen",""],["nz-menu-item","","routerLink","settings/profil"],["nz-menu-item","","routerLink","settings/availabilities"],["nz-menu-item","","routerLink","settings/payments"],["nz-menu-item","","routerLink","settings/diploma"],["nz-menu-item","",3,"click"],[2,"overflow","auto","max-height","calc(100vh - 74px)"],[1,"body","pb-3"]],template:function(e,o){1&e&&(t._UZ(0,"app-header"),t.TgZ(1,"nz-layout",0)(2,"nz-sider",1)(3,"ul",2)(4,"li",3),t._UZ(5,"i",4),t.TgZ(6,"span"),t._uU(7,"Tableau de bord"),t.qZA()(),t.TgZ(8,"li",5)(9,"ul")(10,"li",6),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",7),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"li",8)(17,"ul")(18,"li",9),t._uU(19," Afficher mon profil"),t.qZA(),t.TgZ(20,"li",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"li",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"li",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"li",13),t.NdJ("click",function(){return o.logout()}),t._uU(30,"D\xe9connexion "),t.qZA()()()()(),t.TgZ(31,"nz-content",14)(32,"div",15)(33,"nb-layout")(34,"nb-layout-column"),t._UZ(35,"router-outlet"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("nzCollapsed",!!o.mobile)("nzWidth",290)("nzCollapsedWidth",o.mobile?0:80),t.xp6(9),t.Oqu(t.lcZ(12,8,"lesson.coming")),t.xp6(3),t.Oqu(t.lcZ(15,10,"lesson.history")),t.xp6(7),t.hij(" ",t.lcZ(22,12,"header.availabilities"),""),t.xp6(3),t.hij(" ",t.lcZ(25,14,"header.bank_info"),""),t.xp6(3),t.hij(" ",t.lcZ(28,16,"header.diploma"),""))},directives:[O.G,T.hw,T.t7,A.wO,A.r9,i.rH,S.Ls,A.rY,T.OK,s.Aqw,s.dP_,i.lC],pipes:[l.X$],styles:[".body[_ngcontent-%COMP%]{background-color:#f8f9fb}html[_ngcontent-%COMP%]{overflow-y:hidden}.mx-05[_ngcontent-%COMP%]{margin-right:.5rem;margin-left:.5rem}.pb-05[_ngcontent-%COMP%]{padding-bottom:.5rem}li[_ngcontent-%COMP%]{outline:0}[nz-menu][_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]  .anticon{transform:translateY(0)!important}[_nghost-%COMP%]  .ant-layout-sider-zero-width-trigger{background-color:#45aca0}[_nghost-%COMP%]  .ant-layout-sider-zero-width-trigger:hover{background:#e7e1ff}[_nghost-%COMP%]  .ant-layout-sider-trigger{background-color:#45aca0}[_nghost-%COMP%]  .ant-layout-header{padding:0!important;height:74px}[_nghost-%COMP%]  .ant-layout-content{background-color:#f8f9fb}[_nghost-%COMP%]  .ant-layout-sider{background:white!important;min-height:calc(100vh - 74px)}[_nghost-%COMP%]  .anticon-bars{transform:translateY(-6px)}[_nghost-%COMP%]  .ant-table-tbody td{padding:12px 11px!important}[_nghost-%COMP%]  .ant-table-thead th{padding:12px 11px!important}"]}),n})();var d=r(8574),f=r(4187),g=r(655);function j(n,a){if(1&n&&(t.TgZ(0,"nb-option",2),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(t.lcZ(2,2,e.libelle))}}let I=(()=>{class n{constructor(){}ngOnInit(){this.taught_subjects=this.subjects.filter(e=>e.taught).map(e=>e.id)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-subjects-modal"]],decls:6,vars:5,consts:[["multiple","",1,"w-100",3,"selected","placeholder","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"label"),t._uU(1,"Selectionnez les mati\xe8res enseign\xe9es"),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"nb-select",0),t.NdJ("selectedChange",function(p){return o.taught_subjects=p}),t.ALo(4,"translate"),t.YNc(5,j,3,4,"nb-option",1),t.qZA()),2&e&&(t.xp6(3),t.s9C("placeholder",t.lcZ(4,3,"settings.subjects")),t.Q6J("selected",o.taught_subjects),t.xp6(2),t.Q6J("ngForOf",o.subjects))},directives:[s.rs,u.sg,s.q51],pipes:[l.X$],styles:[""]}),n})();var E=r(8561),k=r(7957),J=r(5070),Y=r(8817),x=r(3075),F=r(9841);function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card",8)(1,"label",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"div",10)(6,"nb-form-field"),t._UZ(7,"nb-icon",11),t.TgZ(8,"input",12),t.NdJ("ngModelChange",function(c){return t.CHM(e),t.oxw().profile.rate=c}),t.qZA()(),t.TgZ(9,"nb-form-field")(10,"nb-select",13),t.NdJ("ngModelChange",function(c){return t.CHM(e),t.oxw().profile.currency=c}),t.TgZ(11,"nb-option",14),t._uU(12,"EUR"),t.qZA(),t.TgZ(13,"nb-option",15),t._uU(14,"USD"),t.qZA(),t.TgZ(15,"nb-option",16),t._uU(16,"AED"),t.qZA()()()(),t.TgZ(17,"label",17),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"textarea",18),t.NdJ("ngModelChange",function(c){return t.CHM(e),t.oxw().profile.description=c}),t.qZA(),t.TgZ(22,"div",10)(23,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveAdditionalInformations()}),t._uU(24),t.ALo(25,"translate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"register.rate")," :"),t.xp6(6),t.Q6J("ngModel",e.profile.rate),t.xp6(2),t.Q6J("ngModel",e.profile.currency),t.xp6(8),t.hij("",t.lcZ(19,8,"register.description.title")," :"),t.xp6(3),t.Q6J("ngModel",e.profile.description),t.xp6(3),t.Oqu(t.lcZ(25,10,"settings.save"))}}function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",23),t.NdJ("nzOnConfirm",function(){t.CHM(e);const c=t.oxw().$implicit;return t.oxw().deleteSubject(c)}),t.ALo(1,"translate"),t._UZ(2,"nb-icon",24),t.qZA()}2&n&&t.s9C("nzPopconfirmTitle",t.lcZ(1,1,"settings.confirm_delete_subject"))}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card",20)(1,"nb-card-header"),t._uU(2),t.ALo(3,"translate"),t.YNc(4,w,3,3,"div",21),t.qZA(),t.TgZ(5,"nb-card-body")(6,"label"),t._uU(7,"Description : "),t.qZA(),t.TgZ(8,"textarea",22),t.NdJ("ngModelChange",function(c){return t.CHM(e).$implicit.description=c}),t.ALo(9,"lowercase"),t.ALo(10,"translate"),t.qZA()()()}if(2&n){const e=a.$implicit;t.Udp("border-top-color",e.subject.color),t.xp6(2),t.hij("",t.lcZ(3,6,e.subject.libelle)," "),t.xp6(2),t.Q6J("ngIf",e.id),t.xp6(4),t.MGl("placeholder","Description of your ",t.lcZ(9,8,t.lcZ(10,10,e.libelle))," class"),t.Q6J("ngModel",e.description)}}let $=(()=>{class n{constructor(e,o,c,p,v){this.subjectService=e,this.modalService=o,this.teacherService=c,this.notificationService=p,this.translate=v,this.teached_subjects=[]}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.getMySubjects(),this.profile=yield this.teacherService.getMyProfile().toPromise()})}getMySubjects(){return(0,g.mG)(this,void 0,void 0,function*(){this.teached_subjects=yield this.subjectService.getMyTeachedSubjects().toPromise(),this.subjects=yield this.subjectService.getAll().toPromise(),this.subjects=this.subjects.map(e=>(e.taught=!!this.teached_subjects.map(o=>o.subject.id).includes(e.id),e))})}saveAdditionalInformations(){return(0,g.mG)(this,void 0,void 0,function*(){this.teacherService.updateProfile(this.profile).toPromise().then(e=>{this.notificationService.primary(this.translate.instant("settings.success_description"),this.translate.instant("shared.success"))}).catch(e=>{this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})})}openAddSubjectsModal(){const e=this.modalService.create({nzContent:I,nzComponentParams:{subjects:this.subjects.filter(o=>!this.teached_subjects.map(c=>c.subject.id).includes(o.id))},nzClosable:!0,nzMaskClosable:!1,nzOnOk:o=>{e.updateConfig({nzOkLoading:!0}),o.taught_subjects.forEach(c=>{const p=this.subjects.find(v=>v.id==c);p.taught||this.teached_subjects.push({description:"",subject:p})})}})}saveSubjects(){const e=this.teached_subjects.map(o=>(o.id=o.subject.id,o));this.subjectService.updateMyTeachedSubjects(e).toPromise().then(o=>{this.notificationService.primary(this.translate.instant("settings.success_description"),this.translate.instant("shared.success")),this.getMySubjects()}).catch(o=>{this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})}deleteSubject(e){this.subjectService.deleteTeachedSubject(e.id).toPromise().then(o=>{this.notificationService.primary(this.translate.instant("settings.success_description"),this.translate.instant("shared.success")),this.getMySubjects()}).catch(o=>this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error")))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E._),t.Y36(k.Sf),t.Y36(J.S),t.Y36(s.quB),t.Y36(l.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-teacher-profile"]],decls:19,vars:14,consts:[[1,"text-center","mt-3"],[1,"mt-5","text-center"],["class","mx-5 mt-4 p-3",4,"ngIf"],[1,""],["accent","info","class","mx-5 mt-4",3,"borderTopColor",4,"ngFor","ngForOf"],[1,"d-flex","flex-row-reverse","mx-5"],["nbButton","","status","primary",1,"mt-5","ms-2",3,"click"],["nbButton","",1,"mt-5","me-2",3,"click"],[1,"mx-5","mt-4","p-3"],[1,"w-100"],[1,"d-flex"],["nbPrefix","","icon","credit-card-outline","pack","eva"],["type","text","placeholder","40","nbInput","",1,"my-3",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","eur"],["value","usd"],["value","aed"],[1,"mt-5"],["nbInput","","fullWidth","","placeholder","",1,"my-3",3,"ngModel","ngModelChange"],["nbButton","","status","primary",1,"mx-auto","d-block",3,"click"],["accent","info",1,"mx-5","mt-4"],["class","float-end pointer text-danger","nz-popconfirm","",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nbInput","","fullWidth","",1,"mt-3",3,"ngModel","placeholder","ngModelChange"],["nz-popconfirm","",1,"float-end","pointer","text-danger",3,"nzPopconfirmTitle","nzOnConfirm"],["icon","archive-outline","pack","eva"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Profile"),t.qZA(),t._UZ(2,"app-profil"),t.TgZ(3,"h3",1),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,B,26,12,"nb-card",2),t.TgZ(7,"h3",1),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",3),t.YNc(11,Q,11,12,"nb-card",4),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return o.saveSubjects()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",7),t.NdJ("click",function(){return o.openAddSubjectsModal()}),t._uU(17),t.ALo(18,"translate"),t.qZA()()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,6,"settings.additional_info")),t.xp6(2),t.Q6J("ngIf",o.profile),t.xp6(2),t.Oqu(t.lcZ(9,8,"settings.subjects")),t.xp6(3),t.Q6J("ngForOf",o.teached_subjects),t.xp6(3),t.Oqu(t.lcZ(15,10,"settings.save")),t.xp6(3),t.Oqu(t.lcZ(18,12,"settings.add_subject")))},directives:[Y.v,u.O5,s.Asz,s.jBG,s.fMN,s.t3q,s.h8i,x.Fj,x.JJ,x.On,s.rs,s.q51,s.DPz,u.sg,s.ndF,F.JW,s.yKW],pipes:[l.X$,u.i8],styles:[""]}),n})();var R=r(4088),W=r(6074),m=r(8909),q=r(7525);function G(n,a){if(1&n&&(t.TgZ(0,"li",20),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.reason)}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card",15)(1,"div")(2,"p",16),t._uU(3,"Il semblerait que vous n'ayez pas encore compl\xe9t\xe9 vos informations pour recevoir les paiements de vos cours, merci de cliquer sur le lien suivant pour compl\xe9ter votre profil "),t.qZA(),t.TgZ(4,"div",6)(5,"ul",17),t.YNc(6,G,2,1,"li",18),t.qZA()(),t.TgZ(7,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openStripeSetup()}),t._uU(8,"Completer mon profil"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",e.account.requirements.errors)}}function H(n,a){1&n&&(t.TgZ(0,"nb-alert",24),t._uU(1,"Inactive yet"),t.qZA())}function X(n,a){1&n&&(t.TgZ(0,"nb-alert",25),t._uU(1,"Active "),t.qZA())}function V(n,a){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,H,2,0,"nb-alert",22),t.YNc(2,X,2,0,"nb-alert",23),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","active"!=e.account.capabilities.transfers),t.xp6(1),t.Q6J("ngIf","active"==e.account.capabilities.transfers)}}function tt(n,a){1&n&&t._UZ(0,"nb-tag",27)}function et(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"uppercase"),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t.YNc(12,tt,1,0,"nb-tag",26),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.object)),t.xp6(3),t.AsE("",t.lcZ(6,7,e.currency)," ",t.lcZ(7,9,e.amount/100),""),t.xp6(4),t.Oqu(t.xi3(10,11,1e3*e.created,"medium")),t.xp6(3),t.Q6J("ngIf",!e.reversed)}}function nt(n,a){if(1&n&&(t.ynx(0),t.YNc(1,et,13,14,"tr",1),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.reversed)}}function it(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,K,9,1,"nb-card",3),t.TgZ(2,"div",4)(3,"label"),t._uU(4,"Transfers : "),t.qZA(),t.YNc(5,V,3,2,"div",5),t.qZA(),t.TgZ(6,"div",6)(7,"label"),t._uU(8,"IBAN : "),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(c){return t.CHM(e),t.oxw().onIbanChange(c)}),t.qZA(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveIban()}),t._uU(12),t.ALo(13,"translate"),t.qZA()()(),t.TgZ(14,"div",10)(15,"div",11)(16,"h5"),t._uU(17,"Liste des paiements"),t.qZA(),t.TgZ(18,"nz-table",12,13)(20,"thead")(21,"tr")(22,"th"),t._uU(23,"Type"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Montant"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Date"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Status"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,nt,2,1,"ng-container",14),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.account?null:e.account.requirements.currently_due.length)>0),t.xp6(4),t.Q6J("ngIf",e.account),t.xp6(4),t.Q6J("ngModel",e.iban),t.xp6(2),t.Q6J("disabled",(null==e.iban?null:e.iban.length)<20),t.xp6(1),t.Oqu(t.lcZ(13,9,"settings.save")),t.xp6(6),t.Q6J("nzLoading",e.loading)("nzFrontPagination",!1)("nzData",e.transfers),t.xp6(13),t.Q6J("ngForOf",e.transfers)}}function ot(n,a){1&n&&t._UZ(0,"nz-spin",28)}let at=(()=>{class n{constructor(e,o,c,p){this.teacherService=e,this.notificationService=o,this.translate=c,this.paymentService=p,this.loading=!0}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.account=yield this.teacherService.getStripeAccount().toPromise(),this.account.external_accounts.data.length&&(this.iban="**** **** **** **** "+this.account.external_accounts.data[0].last4),this.getTransfers()})}getTransfers(){return(0,g.mG)(this,void 0,void 0,function*(){this.transfers=yield this.teacherService.getTransfers().toPromise(),this.loading=!1})}openStripeSetup(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.teacherService.getStripeAccountLink().toPromise();window.open(e.url,"_blank")})}saveIban(){this.iban.includes("****")?this.notificationService.danger(this.translate.instant("settings.invalid_iban"),this.translate.instant("shared.error")):this.teacherService.createBankAccount(this.iban).toPromise().then(e=>{this.notificationService.primary(this.translate.instant("settings.success_description"),this.translate.instant("shared.success"))}).catch(e=>{this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})}onIbanChange(e){this.iban=e.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim()}getReceipt(e){return(0,g.mG)(this,void 0,void 0,function*(){yield this.paymentService.getReceipt(e).toPromise()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(J.S),t.Y36(s.quB),t.Y36(l.sK),t.Y36(W.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bank-info"]],decls:5,vars:5,consts:[[1,"text-center","mt-3"],[4,"ngIf"],["class","text-center",4,"ngIf"],["class","p-3 mx-5",4,"ngIf"],[1,"m-5"],["class","mt-3",4,"ngIf"],[1,"mx-5"],["nbInput","","fullWidth","","placeholder","AE07 0331 2345 6789 0123 456","maxlength","32",1,"mt-3",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row-reverse"],["nbButton","","status","primary",1,"mt-5",3,"disabled","click"],[1,"row","mx-5"],[1,"col-12","px-0"],[3,"nzLoading","nzFrontPagination","nzData"],["basicTable",""],[4,"ngFor","ngForOf"],[1,"p-3","mx-5"],[1,"text-center","muted"],[1,"text-center","list-unstyled"],["class","small",4,"ngFor","ngForOf"],["nbButton","","status","primary",1,"mx-auto","d-block",3,"click"],[1,"small"],[1,"mt-3"],["class","d-inline-block","status","danger",4,"ngIf"],["class","d-inline-block","status","primary",4,"ngIf"],["status","danger",1,"d-inline-block"],["status","primary",1,"d-inline-block"],["size","small","status","basic","appearance","filled","text","En cours",4,"ngIf"],["size","small","status","basic","appearance","filled","text","En cours"],[1,"text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.YNc(3,it,32,11,"div",1),t.YNc(4,ot,1,0,"nz-spin",2)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,3,"header.bank_info")),t.xp6(2),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[u.O5,s.Asz,u.sg,s.DPz,s.$9b,s.h8i,x.Fj,x.nD,x.JJ,x.On,m.N8,m.Om,m.$Z,m.Uo,m._C,m.p0,s.c2L,q.W],pipes:[l.X$,u.rS,u.gd,u.JJ,u.uU],styles:[".small[_ngcontent-%COMP%]{font-size:10px}"]}),n})();var U=r(520),P=r(2340);let rt=(()=>{class n{constructor(e){this.http=e}getMyDiplomas(){return this.http.get(`${P.N.apiUrl}/teacher/diploma`)}deleteFile(e){return this.http.delete(`${P.N.apiUrl}/teacher/diploma/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(U.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var L=r(7581);function st(n,a){if(1&n&&(t._UZ(0,"nb-tag",20),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.s9C("text",t.lcZ(1,1,e.status.label))}}function ct(n,a){if(1&n&&(t._UZ(0,"nb-tag",21),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.s9C("text",t.lcZ(1,1,e.status.label))}}function lt(n,a){if(1&n&&(t._UZ(0,"nb-tag",22),t.ALo(1,"translate")),2&n){const e=t.oxw().$implicit;t.s9C("text",t.lcZ(1,1,e.status.label))}}function dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"nb-icon",23),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit;return t.oxw().deleteFile(c)}),t.qZA()}}function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",14),t.YNc(5,st,2,3,"nb-tag",15),t.YNc(6,ct,2,3,"nb-tag",16),t.YNc(7,lt,2,3,"nb-tag",17),t.qZA()(),t.TgZ(8,"td")(9,"div")(10,"nb-icon",18),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().openFile(p)}),t.qZA(),t.YNc(11,dt,1,0,"nb-icon",19),t.qZA()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngSwitch",null==e||null==e.status?null:e.status.code),t.xp6(1),t.Q6J("ngSwitchCase","waiting"),t.xp6(1),t.Q6J("ngSwitchCase","approved"),t.xp6(1),t.Q6J("ngSwitchCase","refused"),t.xp6(4),t.Q6J("ngIf","approved"!=e.status.code)}}let ut=(()=>{class n{constructor(e,o,c,p,v){this.http=e,this.diplomaService=o,this.notificationService=c,this.translate=p,this.authService=v,this.url=`${P.N.apiUrl}/teacher/diploma/upload`,this.loading=!0,this.customRequest=b=>{b.headers={Authorization:"test"};const D=new FormData;return D.append("file",b.file),this.http.post(this.url,D,{headers:(new U.WM).set("Authorization",`Bearer ${this.authService.getToken()}`)}).subscribe(_=>{_.type===U.dt.UploadProgress?(_.total>0&&(_.percent=_.loaded/_.total*100),b.onProgress(_,b.file)):_ instanceof Array&&(this.diplomas=_,b.onSuccess(_,b.file,_))},_=>{b.onError(_,b.file),this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})}}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.diplomas=yield this.diplomaService.getMyDiplomas().toPromise(),this.loading=!1})}openFile(e){window.open(e.link,"_blank")}deleteFile(e){this.diplomaService.deleteFile(e.id).toPromise().then(o=>{this.diplomas=o}).catch(o=>{this.notificationService.danger(this.translate.instant("shared.error_description"),this.translate.instant("shared.error"))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U.eN),t.Y36(rt),t.Y36(s.quB),t.Y36(l.sK),t.Y36(Z.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-diploma-upload"]],decls:29,vars:10,consts:[[1,"text-center","mt-3"],[1,"text-center","mx-5"],[1,"row","mx-5"],[1,"col-12"],["nzType","drag",3,"nzCustomRequest","nzMultiple","nzAction"],[1,"ant-upload-drag-icon"],["nbPrefix","","icon","cloud-upload-outline","pack","eva",1,"h1","text-primary"],[1,"ant-upload-text"],[1,"ant-upload-hint"],[1,"mx-5"],[1,"text-center","mt-5"],[3,"nzData","nzLoading","nzShowPagination"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["status","basic","size","small","appearance","filled",3,"text",4,"ngSwitchCase"],["status","primary","size","small","appearance","filled",3,"text",4,"ngSwitchCase"],["status","danger","size","small","appearance","filled",3,"text",4,"ngSwitchCase"],["icon","eye-outline","pack","eva",1,"text-primary","mx-1","pointer",3,"click"],["nbPrefix","","icon","trash-outline","pack","eva","class","text-danger mx-1 pointer",3,"click",4,"ngIf"],["status","basic","size","small","appearance","filled",3,"text"],["status","primary","size","small","appearance","filled",3,"text"],["status","danger","size","small","appearance","filled",3,"text"],["nbPrefix","","icon","trash-outline","pack","eva",1,"text-danger","mx-1","pointer",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"p",1),t._uU(4,"Afin de valider votre profil de professeur, nous aurions besoin de v\xe9rifier vos dipl\xf4mes d'enseignants, cette \xe9tape est n\xe9cessaire afin de nous assurer que l'ensemble des professeurs propose un contenu de qualit\xe9 aux \xe9tudiants de la plateforme"),t.qZA(),t.TgZ(5,"div",2)(6,"div",3)(7,"nz-upload",4)(8,"p",5),t._UZ(9,"nb-icon",6),t.qZA(),t.TgZ(10,"p",7),t._uU(11,"Click or drag diploma to this area to upload"),t.qZA(),t.TgZ(12,"p",8),t._uU(13," Support for a single or bulk upload. Supported format are PDF, PNG, JPG, JPEG (max : 5 Mo / file) "),t.qZA()()()(),t.TgZ(14,"div",9)(15,"h5",10),t._uU(16,"Mes dipl\xf4mes enregistr\xe9s"),t.qZA(),t.TgZ(17,"nz-table",11,12)(19,"thead")(20,"tr")(21,"th"),t._uU(22,"File"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Status"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Action"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,pt,12,6,"tr",13),t.qZA()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"header.diploma")),t.xp6(6),t.Q6J("nzCustomRequest",o.customRequest)("nzMultiple",!0)("nzAction",o.url),t.xp6(10),t.Q6J("nzData",o.diplomas)("nzLoading",o.loading)("nzShowPagination",!1),t.xp6(11),t.Q6J("ngForOf",o.diplomas))},directives:[L.FY,s.fMN,s.t3q,m.N8,m.Om,m.$Z,m.Uo,m._C,m.p0,u.sg,u.RF,u.n9,s.c2L,u.O5],pipes:[l.X$],styles:[""]}),n})();var mt=r(4172);const ht=[{path:"",component:h,canActivate:[d.P],children:[{path:"dashboard",component:C,pathMatch:"full"},{path:"settings",children:[{path:"profil",component:$},{path:"payments",component:at},{path:"diploma",component:ut},{path:"availabilities",component:mt.w}]},{path:"lessons",children:[{path:"",component:f.o,data:{type:"coming",title:"lesson.coming"}},{path:"history",component:f.o,data:{type:"history",title:"lesson.history"}},{path:":id",component:R.l}]}]}];let gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[i.Bz.forChild(ht)],i.Bz]}),n})();var _t=r(7175),ft=r(8836),vt=r(3762),bt=r(8054),xt=r(1894);let Zt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n,bootstrap:[h]}),n.\u0275inj=t.cJS({imports:[[u.ez,gt,s.T2N,s.PYG,vt.Ph,k.Qp,bt.LV,_t.m,s.BW0,s.KdK,T.wm,A.ip,ft.StudentModule,s.zyh,s.nKr,s.IIj,F._p,s.V7y,q.j,L.cS,S.PV,m.HQ,s.urD,q.j,xt.Jb]]}),n})()}}]);