"use strict";(self.webpackChunkprof_front=self.webpackChunkprof_front||[]).push([[218],{8574:(U,O,r)=>{r.d(O,{P:()=>e});var C=r(655),n=r(5e3),x=r(325),g=r(263);let e=(()=>{class T{constructor(v,w){this.router=v,this.userService=w}canActivate(){return(0,C.mG)(this,void 0,void 0,function*(){return yield this.userService.populate(),!!this.userService.getToken()||(this.router.navigate(["/login"]),!1)})}}return T.\u0275fac=function(v){return new(v||T)(n.LFG(x.F0),n.LFG(g.e))},T.\u0275prov=n.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},3175:(U,O,r)=>{r.d(O,{a:()=>v});var C=r(655),n=r(591),x=r(2340),g=r(5e3),e=r(520),T=r(8393),p=r(263);let v=(()=>{class M{constructor(l,y,b){this.http=l,this.socket=y,this.userService=b,this.isRegistred=!1,this.currentRoomId=null,this.rooms=new n.X([]),this.unreadMessageCount=new n.X(0),this.audioService=new Audio,this.subscriptions=[],y.on("connect",function(){y.emit("register",{userId:b.currentUserValue.id})}),y.on("disconnect",()=>this.isRegistred=!1)}connect(l=!1){return(0,C.mG)(this,void 0,void 0,function*(){console.log(l),(!this.isRegistred||l)&&(this.isRegistred=!0,this.clearSubscriptions(),this.clearUnReadMessage(),this.subscribeToNewMessages())})}clearUnReadMessage(){this.unreadMessageCount.next(0)}clearUnReadMessageForRoom(l){const y=this.rooms.value,b=y.find(E=>E.id==l);b&&(b.new_message=!1),this.rooms.next(y)}setNewMessage(l){const y=this.rooms.value,b=y.find(A=>A.id==l.roomId);l.userId!=this.userService.currentUserValue.id&&l.roomId!=this.currentRoomId&&(b.new_message=!0),b.updated_at=(new Date).toISOString(),b.last_message=l;const E=y.sort((A,h)=>new Date(h.updated_at).getTime()-new Date(A.updated_at).getTime());this.rooms.next(E)}getMyRooms(){return(0,C.mG)(this,void 0,void 0,function*(){let l=yield this.http.get(`${x.N.chatServer}/rooms/my`).toPromise();this.rooms.next(l)})}getRoomMessages(l){return this.http.get(`${x.N.chatServer}/rooms/${l}/messages`)}createRoom(l){return l.users=l.users.map(y=>y.id),this.http.post(`${x.N.chatServer}/rooms`,l)}getRoom(l){return this.http.get(`${x.N.chatServer}/rooms/${l}`)}sendMessage(l,y=!1){y?this.http.post(`${x.N.chatServer}/messages`,l).toPromise():this.socket.emit("new_message",l)}onNewMessage(){return this.socket.fromEvent("new_message")}clearSubscriptions(){this.subscriptions.map(l=>l.unsubscribe())}subscribeToNewMessages(){const l=this.onNewMessage().subscribe(y=>{this.setNewMessage(y),y.userId!=this.userService.currentUserValue.id&&(this.audioService.src="../../../assets/mp3/message.mp3",this.audioService.load(),this.audioService.play(),y.roomId!=this.currentRoomId&&this.unreadMessageCount.next(this.unreadMessageCount.value+1))});this.subscriptions.push(l)}emitNewRoomCreate(l){this.socket.emit("new_room",l)}}return M.\u0275fac=function(l){return new(l||M)(g.LFG(e.eN),g.LFG(T.sk),g.LFG(p.e))},M.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},2171:(U,O,r)=>{r.d(O,{J:()=>g});var C=r(520),n=r(2340),x=r(5e3);let g=(()=>{class e{constructor(p){this.http=p}getMyLessons(p){const v=new C.LE({fromObject:p});return this.http.get(`${n.N.apiUrl}/lessons`,{params:v})}getAllStudentsLessons(p,v){const w=new C.LE({fromObject:p});return this.http.get(`${n.N.apiUrl}/admin/students/${v}/all-lessons`,{params:w})}getHistory(p){const v=new C.LE({fromObject:p});return this.http.get(`${n.N.apiUrl}/lessons/history`,{params:v})}find(p){return this.http.get(`${n.N.apiUrl}/lessons/${p}`)}store(p){return this.http.post(`${n.N.apiUrl}/lessons`,Object.assign({},p))}createCollabLesson(p){return this.http.post(`${n.N.apiUrl}/teacher/lesson/create`,p)}joinCollaborationLesson(p){return this.http.post(`${n.N.apiUrl}/lessons/join/${p}`,{})}cancel(p){return this.http.delete(`${n.N.apiUrl}/lessons/${p}`)}confirm(p){return this.http.put(`${n.N.apiUrl}/teacher/lesson/confirm/${p}`,{})}update(p){return this.http.put(`${n.N.apiUrl}/lessons/${p.id}`,p)}}return e.\u0275fac=function(p){return new(p||e)(x.LFG(C.eN))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7218:(U,O,r)=>{r.r(O),r.d(O,{ClassroomModule:()=>Ye});var C=r(9808),n=r(325),x=r(8574),g=r(655),e=r(5e3),T=r(263),p=r(591),v=r(8929),w=r(8393);let k=(()=>{class i{constructor(t){this.socket=t,this.peerConnectionSubject=new p.X(this.openRTCConnection()),this.currentRoomId=null,this.subscriptions=[],this.onNewParticipant=new v.xQ,this.onNewMessage=new v.xQ,this.onRemoteCameraChange=new v.xQ}joinRoom(t,o=!0,s=!0){return(0,g.mG)(this,void 0,void 0,function*(){this.peerConnection.onicecandidate=N=>{N.candidate&&this.socket.emit("classroom.new-ice-candidate",{candidat:N.candidate,room_id:t.room_id})},this.peerConnection.onnegotiationneeded=N=>{this.peerConnection.createOffer().then(R=>this.peerConnection.setLocalDescription(R)).then(()=>{this.socket.emit("classroom.negociating",{room_id:t.room_id,sessionDescription:this.peerConnection.localDescription})}).catch(R=>console.log(R))};const u=this.socket.fromEvent("classroom.negociating").subscribe(N=>{this.sendAnswer(N.sessionDescription)}),P=this.socket.fromEvent("classroom.answer").subscribe(N=>(0,g.mG)(this,void 0,void 0,function*(){this.peerConnection.remoteDescription||(yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(N.answer)),this.onNewParticipant.next(N))})),F=this.socket.fromEvent("classroom.need_answer").subscribe(N=>{this.sendAnswer(N.sessionDescription,o,s)}),B=this.socket.fromEvent("classroom.new-ice-candidate").subscribe(N=>(0,g.mG)(this,void 0,void 0,function*(){const R=new RTCIceCandidate(N);try{yield this.peerConnection.addIceCandidate(R)}catch(dt){}})),Q=this.socket.fromEvent("classroom.new_message").subscribe(N=>{this.onNewMessage.next(N)}),J=this.socket.fromEvent("classroom.camera_toggle").subscribe(N=>{console.log("camera toogled",N),this.onRemoteCameraChange.next(N)}),Y=this.socket.fromEvent("classroom.disconnect").subscribe(N=>{this.clearSubscription()});this.socket.emit("classroom.join",t),this.subscriptions.push(u,P,F,B,Y,Q,J)})}sendAnswer(t,o=!0,s=!0){return(0,g.mG)(this,void 0,void 0,function*(){if(this.stream||(yield this.getMediaStream(o,s),this.addTracksToPeerConnection(this.stream)),!this.peerConnection.remoteDescription){yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(t));const u=yield this.peerConnection.createAnswer();this.peerConnection.setLocalDescription(u),this.socket.emit("classroom.answer",{room_id:this.currentRoomId,answer:u}),this.onNewParticipant.next(u)}})}createOffer(t=!0,o=!0){return(0,g.mG)(this,void 0,void 0,function*(){yield this.getMediaStream(t,o),this.addTracksToPeerConnection(this.stream);let s=yield this.peerConnection.createOffer();return this.peerConnection.setLocalDescription(s),s})}startAudio(){this.stream&&this.stream.getAudioTracks().forEach(t=>t.enabled=!0)}stopAudio(){this.stream.getAudioTracks().forEach(t=>t.enabled=!1)}startVideo(){this.stream.getVideoTracks().forEach(t=>t.enabled=!0),this.socket.emit("classroom.camera_toggle",{room_id:this.currentRoomId,active:!0})}stopVideo(){this.stream.getVideoTracks().forEach(t=>t.enabled=!1),this.socket.emit("classroom.camera_toggle",{room_id:this.currentRoomId,active:!1})}sendMessage(t){this.socket.emit("classroom.new_message",t)}addTracksToPeerConnection(t){t&&t.getTracks().forEach(o=>{this.peerConnection.addTrack(o,t)})}getMediaStream(t=!0,o=!0){return(0,g.mG)(this,void 0,void 0,function*(){let s={audio:o,video:t};try{navigator.mediaDevices&&(this.stream=yield navigator.mediaDevices.getUserMedia({audio:o,video:!!t&&{width:{ideal:4096},height:{ideal:2160}}}))}catch(u){console.log(u),s={audio:!1,video:t},this.stream=yield navigator.mediaDevices.getUserMedia(s)}return s})}startScreenShare(){return(0,g.mG)(this,void 0,void 0,function*(){const t=yield navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0}),o=t.getVideoTracks()[0];if(this.videoTrack){this.videoTrack.replaceTrack(o);try{this.videoTrack=this.peerConnection.addTrack(o,this.stream)}catch(s){this.stream.getVideoTracks().forEach(u=>u.enabled=!0)}}else this.addTracksToPeerConnection(t)})}stopScreenShare(){return(0,g.mG)(this,void 0,void 0,function*(){this.stream&&this.stream.getVideoTracks().forEach(t=>{t.enabled=!1})})}openRTCConnection(){return new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]})}sendDisconnect(){this.socket.emit("classroom.disconnect",{})}clearSubscription(){this.stream&&this.stream.getTracks().map(t=>t.stop()),this.peerConnection.ontrack=null,this.peerConnection.onicecandidate=null,this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicegatheringstatechange=null,this.peerConnection.onnegotiationneeded=null,this.peerConnection.close(),this.stream=null,this.peerConnectionSubject.next(this.openRTCConnection()),this.subscriptions.map(t=>t.unsubscribe()),console.log("La connexion a \xe9t\xe9 interrompu, refreshing"),window.location.reload()}get peerConnection(){return this.peerConnectionSubject.getValue()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w.sk))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=r(2171),z=r(8669),l=r(6699);let y=(()=>{class i{constructor(){this.isMic=!0,this.isCamera=!0,this.onCameraChange=new e.vpe,this.onMicrophoneChange=new e.vpe,this.screenSharing=!1,this.screenSharingChange=new e.vpe,this.onLeave=new e.vpe,this.onOpenChat=new e.vpe,this.unReadMessage=0,this.startDate=null,this.timeElapsed=0}ngOnInit(){setInterval(()=>{this.timeElapsed++,this.startDate=new Date(1e3*this.timeElapsed).toISOString().substr(14,5)},1e3)}microphoneChange(){this.isMic=!this.isMic,this.onMicrophoneChange.emit(this.isMic)}cameraChange(){this.isCamera=!this.isCamera,this.onCameraChange.emit(this.isCamera)}onScreenSharingChange(){this.screenSharing=!this.screenSharing,this.screenSharingChange.emit(this.screenSharing)}onOpenChatFn(){this.onOpenChat.emit()}leave(){this.onLeave.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-call-controls"]],inputs:{screenSharing:"screenSharing",unReadMessage:"unReadMessage"},outputs:{onCameraChange:"onCameraChange",onMicrophoneChange:"onMicrophoneChange",screenSharingChange:"screenSharingChange",onLeave:"onLeave",onOpenChat:"onOpenChat"},decls:9,vars:11,consts:[[1,"call-controls"],[1,"text-center","text-grey"],["size","small"],[1,"text-primary","pointer",3,"icon","click"],["badgePosition","top left","badgeStatus","primary","icon","message-square-outline",3,"badgeDot","click"],["icon","phone-off-outline",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"nb-actions",2)(4,"nb-action",3),e.NdJ("click",function(){return o.microphoneChange()}),e.qZA(),e.TgZ(5,"nb-action",3),e.NdJ("click",function(){return o.cameraChange()}),e.qZA(),e.TgZ(6,"nb-action",3),e.NdJ("click",function(){return o.onScreenSharingChange()}),e.qZA(),e.TgZ(7,"nb-action",4),e.NdJ("click",function(){return o.onOpenChatFn()}),e.qZA(),e.TgZ(8,"nb-action",5),e.NdJ("click",function(){return o.leave()}),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(o.startDate),e.xp6(2),e.ekj("active",o.isMic),e.Q6J("icon",o.isMic?"mic-outline":"mic-off-outline"),e.xp6(1),e.ekj("active",o.isCamera),e.Q6J("icon",o.isCamera?"video-outline":"video-off-outline"),e.xp6(1),e.ekj("active",o.screenSharing),e.Q6J("icon","monitor-outline"),e.xp6(1),e.Q6J("badgeDot",o.unReadMessage>0))},directives:[z.lYD,z.Bk3],styles:["[_nghost-%COMP%]  .ant-card-body{display:none}[_nghost-%COMP%]  ul li:last-child{background-color:red;color:#fff}[_nghost-%COMP%]  .ant-card-actions>li{float:left;padding:12px 0!important;margin:0!important}[_nghost-%COMP%]  .text-grey{color:#8f9bb3}[_nghost-%COMP%]  nb-actions{background:white;padding:12px;border-radius:7px}[_nghost-%COMP%]  .active nb-icon{color:#45aca0}.call-controls[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:50%;transform:translate(-50%)}"]}),i})();var b=r(9470),E=r(3713),A=r(1159),h=r(1314),S=r(7429),d=r(7625),c=r(9439),m=r(1721),f=r(5664),_=r(226),D=r(4832),I=r(969),Z=r(3087);const L=["drawerTemplate"];function $(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).maskClick()}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngStyle",t.nzMaskStyle)}}function K(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"i",19),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("nzType",t)}}function X(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).closeClick()}),e.YNc(1,K,2,1,"ng-container",18),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzCloseIcon)}}function q(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.nzTitle,e.oJD)}}function ee(i,a){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,q,2,1,"ng-container",18),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzTitle)}}function te(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.nzExtra,e.oJD)}}function ne(i,a){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,te,2,1,"ng-container",18),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzExtra)}}function ie(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13),e.YNc(2,X,2,1,"button",14),e.YNc(3,ee,2,1,"div",15),e.qZA(),e.YNc(4,ne,2,1,"div",16),e.qZA()),2&i){const t=e.oxw(2);e.ekj("ant-drawer-header-close-only",!t.nzTitle),e.xp6(2),e.Q6J("ngIf",t.nzClosable),e.xp6(1),e.Q6J("ngIf",t.nzTitle),e.xp6(1),e.Q6J("ngIf",t.nzExtra)}}function oe(i,a){}function ae(i,a){1&i&&e.GkF(0)}function re(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ae,1,0,"ng-container",24),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.nzContent)("ngTemplateOutletContext",t.templateContext)}}function se(i,a){if(1&i&&(e.ynx(0),e.YNc(1,re,2,2,"ng-container",23),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isTemplateRef(t.nzContent))}}function ce(i,a){}function le(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ce,0,0,"ng-template",25),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.contentFromContentChild)}}function de(i,a){if(1&i&&e.YNc(0,le,2,1,"ng-container",23),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.contentFromContentChild&&(t.isOpen||t.inAnimation))}}function pe(i,a){if(1&i&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.nzFooter,e.oJD)}}function he(i,a){if(1&i&&(e.TgZ(0,"div",26),e.YNc(1,pe,2,1,"ng-container",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzFooter)}}function ue(i,a){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,$,1,1,"div",2),e.TgZ(2,"div")(3,"div",3)(4,"div",4),e.YNc(5,ie,5,5,"div",5),e.TgZ(6,"div",6),e.YNc(7,oe,0,0,"ng-template",7),e.YNc(8,se,2,1,"ng-container",8),e.YNc(9,de,1,1,"ng-template",null,9,e.W1O),e.qZA(),e.YNc(11,he,2,1,"div",10),e.qZA()()()()),2&i){const t=e.MAs(10),o=e.oxw();e.Udp("transform",o.offsetTransform)("transition",o.placementChanging?"none":null)("z-index",o.nzZIndex),e.ekj("ant-drawer-rtl","rtl"===o.dir)("ant-drawer-open",o.isOpen)("no-mask",!o.nzMask)("ant-drawer-top","top"===o.nzPlacement)("ant-drawer-bottom","bottom"===o.nzPlacement)("ant-drawer-right","right"===o.nzPlacement)("ant-drawer-left","left"===o.nzPlacement),e.Q6J("nzNoAnimation",o.nzNoAnimation),e.xp6(1),e.Q6J("ngIf",o.nzMask),e.xp6(1),e.Gre("ant-drawer-content-wrapper ",o.nzWrapClassName,""),e.Udp("width",o.width)("height",o.height)("transform",o.transform)("transition",o.placementChanging?"none":null),e.xp6(2),e.Udp("height",o.isLeftOrRight?"100%":null),e.xp6(1),e.Q6J("ngIf",o.nzTitle||o.nzClosable),e.xp6(1),e.Q6J("ngStyle",o.nzBodyStyle),e.xp6(2),e.Q6J("ngIf",o.nzContent)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",o.nzFooter)}}let G=(()=>{class i{constructor(t){this.templateRef=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["","nzDrawerContent",""]],exportAs:["nzDrawerContent"]}),i})();class W{}let V=(()=>{class i extends W{constructor(t,o,s,u,P,F,B,Q,J,Y,N){super(),this.cdr=t,this.document=o,this.nzConfigService=s,this.renderer=u,this.overlay=P,this.injector=F,this.changeDetectorRef=B,this.focusTrapFactory=Q,this.viewContainerRef=J,this.overlayKeyboardDispatcher=Y,this.directionality=N,this._nzModuleName="drawer",this.nzCloseIcon="close",this.nzClosable=!0,this.nzMaskClosable=!0,this.nzMask=!0,this.nzCloseOnNavigation=!0,this.nzNoAnimation=!1,this.nzKeyboard=!0,this.nzPlacement="right",this.nzSize="default",this.nzMaskStyle={},this.nzBodyStyle={},this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.componentInstance=null,this.nzOnViewInit=new e.vpe,this.nzOnClose=new e.vpe,this.nzVisibleChange=new e.vpe,this.destroy$=new v.xQ,this.placementChanging=!1,this.placementChangeTimeoutId=-1,this.isOpen=!1,this.inAnimation=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new v.xQ,this.nzAfterClose=new v.xQ,this.nzDirection=void 0,this.dir="ltr"}set nzVisible(t){this.isOpen=t}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){if(this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,m.WX)(void 0===this.nzWidth?t:this.nzWidth)}return null}get height(){if(!this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,m.WX)(void 0===this.nzHeight?t:this.nzHeight)}return null}get isLeftOrRight(){return"left"===this.nzPlacement||"right"===this.nzPlacement}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}isTemplateRef(t){return t instanceof e.Rgc}ngOnInit(){var t;null===(t=this.directionality.change)||void 0===t||t.pipe((0,d.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.nzDirection||this.directionality.value,this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),this.nzOnViewInit.observers.length&&setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(t){const{nzPlacement:o,nzVisible:s}=t;s&&(t.nzVisible.currentValue?this.open():this.close()),o&&!o.isFirstChange()&&this.triggerPlacementChangeCycleOnce()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),clearTimeout(this.placementChangeTimeoutId),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:300}triggerPlacementChangeCycleOnce(){this.nzNoAnimation||(this.placementChanging=!0,this.changeDetectorRef.markForCheck(),clearTimeout(this.placementChangeTimeoutId),this.placementChangeTimeoutId=setTimeout(()=>{this.placementChanging=!1,this.changeDetectorRef.markForCheck()},this.getAnimationDuration()))}close(t){this.isOpen=!1,this.inAnimation=!0,this.nzVisibleChange.emit(!1),this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.inAnimation=!1,this.nzAfterClose.next(t),this.nzAfterClose.complete(),this.componentInstance=null},this.getAnimationDuration())}open(){this.attachOverlay(),this.isOpen=!0,this.inAnimation=!0,this.nzVisibleChange.emit(!0),this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.inAnimation=!1,this.changeDetectorRef.detectChanges(),this.nzAfterOpen.next()},this.getAnimationDuration())}getContentComponent(){return this.componentInstance}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof e.DyG){const t=e.zs3.create({parent:this.injector,providers:[{provide:W,useValue:this}]}),o=new S.C5(this.nzContent,null,t),s=this.bodyPortalOutlet.attachComponentPortal(o);this.componentInstance=s.instance,Object.assign(s.instance,this.nzContentParams),s.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new S.UE(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe((0,d.R)(this.destroy$)).subscribe(t=>{t.keyCode===A.hY&&this.isOpen&&this.nzKeyboard&&this.nzOnClose.emit()}),this.overlayRef.detachments().pipe((0,d.R)(this.destroy$)).subscribe(()=>{this.disposeOverlay()}))}disposeOverlay(){var t;null===(t=this.overlayRef)||void 0===t||t.dispose(),this.overlayRef=null}getOverlayConfig(){return new h.X_({disposeOnNavigation:this.nzCloseOnNavigation,positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.blur&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(C.K0,8),e.Y36(c.jY),e.Y36(e.Qsj),e.Y36(h.aV),e.Y36(e.zs3),e.Y36(e.sBO),e.Y36(f.qV),e.Y36(e.s_b),e.Y36(h.Vs),e.Y36(_.Is,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nz-drawer"]],contentQueries:function(t,o,s){if(1&t&&e.Suo(s,G,7,e.Rgc),2&t){let u;e.iGM(u=e.CRH())&&(o.contentFromContentChild=u.first)}},viewQuery:function(t,o){if(1&t&&(e.Gf(L,7),e.Gf(S.Pl,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.drawerTemplate=s.first),e.iGM(s=e.CRH())&&(o.bodyPortalOutlet=s.first)}},inputs:{nzContent:"nzContent",nzCloseIcon:"nzCloseIcon",nzClosable:"nzClosable",nzMaskClosable:"nzMaskClosable",nzMask:"nzMask",nzCloseOnNavigation:"nzCloseOnNavigation",nzNoAnimation:"nzNoAnimation",nzKeyboard:"nzKeyboard",nzTitle:"nzTitle",nzExtra:"nzExtra",nzFooter:"nzFooter",nzPlacement:"nzPlacement",nzSize:"nzSize",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWrapClassName:"nzWrapClassName",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:"nzVisible"},outputs:{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzDrawer"],features:[e.qOj,e.TTD],decls:2,vars:0,consts:[["drawerTemplate",""],[1,"ant-drawer",3,"nzNoAnimation"],["class","ant-drawer-mask",3,"ngStyle","click",4,"ngIf"],[1,"ant-drawer-content"],[1,"ant-drawer-wrapper-body"],["class","ant-drawer-header",3,"ant-drawer-header-close-only",4,"ngIf"],[1,"ant-drawer-body",3,"ngStyle"],["cdkPortalOutlet",""],[4,"ngIf","ngIfElse"],["contentElseTemp",""],["class","ant-drawer-footer",4,"ngIf"],[1,"ant-drawer-mask",3,"ngStyle","click"],[1,"ant-drawer-header"],[1,"ant-drawer-header-title"],["aria-label","Close","class","ant-drawer-close","style","--scroll-bar: 0px;",3,"click",4,"ngIf"],["class","ant-drawer-title",4,"ngIf"],["class","ant-drawer-extra",4,"ngIf"],["aria-label","Close",1,"ant-drawer-close",2,"--scroll-bar","0px",3,"click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"],[1,"ant-drawer-title"],[3,"innerHTML"],[1,"ant-drawer-extra"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"ant-drawer-footer"]],template:function(t,o){1&t&&e.YNc(0,ue,12,40,"ng-template",null,0,e.W1O)},directives:[D.P,C.O5,C.PC,I.f,Z.Ls,S.Pl,C.tP],encapsulation:2,changeDetection:0}),(0,g.gn)([(0,m.yF)()],i.prototype,"nzClosable",void 0),(0,g.gn)([(0,c.oS)(),(0,m.yF)()],i.prototype,"nzMaskClosable",void 0),(0,g.gn)([(0,c.oS)(),(0,m.yF)()],i.prototype,"nzMask",void 0),(0,g.gn)([(0,c.oS)(),(0,m.yF)()],i.prototype,"nzCloseOnNavigation",void 0),(0,g.gn)([(0,m.yF)()],i.prototype,"nzNoAnimation",void 0),(0,g.gn)([(0,m.yF)()],i.prototype,"nzKeyboard",void 0),(0,g.gn)([(0,c.oS)()],i.prototype,"nzDirection",void 0),i})(),ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.vT,C.ez,h.U8,S.eL,Z.PV,I.T,D.g,ge]]}),i})();const Ce=["participantVideo"],ve=["videoFallBack"];function ze(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-call-controls",13),e.NdJ("unReadMessageChange",function(s){return e.CHM(t),e.oxw().unReadMessage=s})("screenSharingChange",function(s){return e.CHM(t),e.oxw().inputs.screenShare=s})("onOpenChat",function(){return e.CHM(t),e.oxw().openChat()})("screenSharingChange",function(s){return e.CHM(t),e.oxw().onScreenSharingChange(s)})("onLeave",function(){return e.CHM(t),e.oxw().leaveSession()})("onMicrophoneChange",function(s){return e.CHM(t),e.oxw().onMicrophoneChange(s)})("onCameraChange",function(s){return e.CHM(t),e.oxw().toogleCamera(s)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("unReadMessage",t.unReadMessage)("screenSharing",t.inputs.screenShare)}}function ye(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"app-header"),e.TgZ(2,"h4",14),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",15),e._UZ(6,"ng-lottie",16),e.qZA(),e.TgZ(7,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().initConnection()}),e._uU(8,"Connect to classroom"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij("Lesson ",e.xi3(4,2,null==t.lesson?null:t.lesson.scheduled_at,"MMM d, y, h:mm a"),""),e.xp6(3),e.Q6J("options",t.options)}}function xe(i,a){if(1&i&&e._UZ(0,"nb-chat-message",21),2&i){const t=a.$implicit;e.Q6J("files",t.files)("type",t.type)("message",t.message)("reply",t.reply)("sender",t.user.firstname)("date",t.date)("avatar",t.user.image)}}function Te(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"nb-chat",18),e.YNc(2,xe,1,7,"nb-chat-message",19),e.TgZ(3,"nb-chat-form",20),e.NdJ("send",function(s){return e.CHM(t),e.oxw().sendMessage(s)}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.messages),e.xp6(1),e.Q6J("dropFiles",!0)}}const Se=[{path:":id",component:(()=>{class i{constructor(t,o,s,u){this.route=t,this.userService=o,this.callService=s,this.lessonService=u,this.participants=0,this.options={path:"/assets/animations/education.json"},this.audioEncode=!1,this.audioDecode=!1,this.connected=!1,this.inputs={camera:!0,mic:!0,screenShare:!1,chat:!1},this.messages=[],this.name=this.userService.currentUserValue.firstname+" "+this.userService.currentUserValue.lastname,this.unReadMessage=0,this.started=!1,this.lesson=null}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.lesson_id=this.route.snapshot.params.id,this.callService.currentRoomId=this.lesson_id,this.lesson=yield this.lessonService.find(this.lesson_id).toPromise(),this.getConnectedUser()})}initConnection(){return(0,g.mG)(this,void 0,void 0,function*(){this.connected||(this.connected=!0,yield this.callService.joinRoom({room_id:this.lesson_id,user_id:this.userService.currentUserValue.id,sessionDescription:yield this.callService.createOffer(this.inputs.camera,this.inputs.mic)}),this.startVideoFallback(),this.callService.peerConnection.ontrack=t=>{this.started=!0,this.participantVideo.nativeElement.srcObject=t.streams[0]},this.callService.onNewParticipant.subscribe(t=>{this.started=!0}),this.callService.onNewMessage.subscribe(t=>{const o=t.type;t.type="text"!=t.type?"file":"text","file"==t.type&&(t.files=[{url:t.content,type:o,icon:"file-text-outline"}]),t.reply=this.userService.currentUserValue.id==t.user_id,t.user=t.reply?this.userService.currentUserValue:this.connectedUser,this.messages.push(t),this.inputs.chat||this.unReadMessage++,console.log(t)}),this.callService.onRemoteCameraChange.subscribe(t=>{this.connectedUser.camera=t.active}))})}toogleCamera(t){this.inputs.camera=t,t?this.callService.startVideo():this.callService.stopVideo()}onMicrophoneChange(t){this.inputs.mic=t,t?this.callService.stopAudio():this.callService.startAudio()}onScreenSharingChange(t){this.inputs.screenShare=t,t?this.callService.startScreenShare():(this.callService.stopScreenShare(),this.inputs.camera&&this.toogleCamera(!0))}openChat(){this.unReadMessage=0,this.inputs.chat=!0}sendMessage(t){if(t.files.length){let o=t.files?t.files.map(s=>({data:s,type:s.type,name:s.name})):[];t.files=o}t.date=(new Date).getTime(),t.room_id=this.lesson_id,t.user_id=this.userService.currentUserValue.id,this.callService.sendMessage(t)}getConnectedUser(){this.connectedUser=this.userService.currentUserValue.id==this.lesson.teacher_id?this.lesson.students[0]||null:this.lesson.teacher,this.connectedUser.camera=!0,console.log(this.connectedUser)}startVideoFallback(){this.callService.stream&&(this.videoFallBack.nativeElement.srcObject=this.callService.stream)}leaveSession(){this.callService.sendDisconnect(),this.callService.clearSubscription()}getInitial(){var t,o,s,u;return(null===(o=null===(t=this.connectedUser)||void 0===t?void 0:t.firstname)||void 0===o?void 0:o.charAt(0))+(null===(u=null===(s=this.connectedUser)||void 0===s?void 0:s.lastname)||void 0===u?void 0:u.charAt(0))}ngOnDestroy(){this.callService.sendDisconnect(),this.callService.clearSubscription()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.gz),e.Y36(T.e),e.Y36(k),e.Y36(M.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-classroom"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ce,5),e.Gf(ve,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.participantVideo=s.first),e.iGM(s=e.CRH())&&(o.videoFallBack=s.first)}},decls:18,vars:19,consts:[["nbSpinnerStatus","primary","nbSpinnerMessage","Waiting for remote to connect",3,"nbSpinner"],["autoplay","","playsinline","","id","participants-video",1,"w-100","h-100"],["participantVideo",""],[1,"cover"],[1,"center"],[1,"bg-primary",3,"nzSize","nzText"],[1,"text-center","mt-3","text-grey"],["autoplay","","playsinline","","id","video",1,"video-fallback","max-index",3,"muted"],["videoFallBack",""],[3,"unReadMessage","screenSharing","unReadMessageChange","screenSharingChange","onOpenChat","onLeave","onMicrophoneChange","onCameraChange",4,"ngIf"],[4,"ngIf"],["nzPlacement","left","nzSize","large",3,"nzClosable","nzVisible","nzTitle","nzOnClose"],[4,"nzDrawerContent"],[3,"unReadMessage","screenSharing","unReadMessageChange","screenSharingChange","onOpenChat","onLeave","onMicrophoneChange","onCameraChange"],[1,"text-grey","text-center","mt-4"],[1,"d-block","mx-auto",2,"width","40%"],[3,"options"],["nbButton","","hero","","size","large","status","primary",1,"d-block","mx-auto",3,"click"],["title","Conversation"],["dateFormat","shortTime",3,"files","type","message","reply","sender","date","avatar",4,"ngFor","ngForOf"],[3,"dropFiles","send"],["dateFormat","shortTime",3,"files","type","message","reply","sender","date","avatar"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"div")(3,"div",0),e._UZ(4,"video",1,2),e.TgZ(6,"div")(7,"div",3)(8,"div",4),e._UZ(9,"nz-avatar",5),e.TgZ(10,"p",6),e._uU(11),e.qZA()()()()(),e._UZ(12,"video",7,8),e.YNc(14,ze,1,2,"app-call-controls",9),e.qZA(),e.YNc(15,ye,9,5,"div",10),e.TgZ(16,"nz-drawer",11),e.NdJ("nzOnClose",function(){return o.inputs.chat=!1}),e.YNc(17,Te,4,2,"ng-container",12),e.qZA()()()),2&t&&(e.xp6(2),e.ekj("d-none",!o.connected),e.xp6(1),e.Q6J("nbSpinner",!o.started&&o.connected),e.xp6(1),e.ekj("d-none",!(null!=o.connectedUser&&o.connectedUser.camera)),e.xp6(2),e.ekj("d-none",null==o.connectedUser?null:o.connectedUser.camera),e.xp6(3),e.Q6J("nzSize",150)("nzText",o.getInitial()),e.xp6(2),e.AsE("",null==o.connectedUser?null:o.connectedUser.firstname," ",null==o.connectedUser?null:o.connectedUser.lastname,""),e.xp6(1),e.ekj("invisible",!o.inputs.camera),e.Q6J("muted",!0),e.xp6(2),e.Q6J("ngIf",o.started),e.xp6(1),e.Q6J("ngIf",!o.connected),e.xp6(1),e.Q6J("nzClosable",!0)("nzVisible",o.inputs.chat)("nzTitle",null))},directives:[z.Aqw,z.dP_,z.Q7R,l.Dz,C.O5,y,b.G,E.e$,z.DPz,V,G,z.vTO,C.sg,z.ksC,z.iMi],pipes:[C.uU],styles:[".call-controls[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:50%;transform:translate(-50%)}.video-fallback[_ngcontent-%COMP%]{position:fixed;bottom:50px;right:50px;width:400px;height:220px;border-radius:25px}.cover[_ngcontent-%COMP%]{z-index:100;width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]  .ant-avatar-string{font-size:50px}[_nghost-%COMP%]  .bg-primary{background-color:var(--text-primary-color)!important}[_nghost-%COMP%]  .ant-avatar-string{position:inherit;left:0px}[_nghost-%COMP%]  .center{position:absolute;top:50%;transform:translateY(-50%)}[_nghost-%COMP%]  .text-grey{color:#8f9bb3}[_nghost-%COMP%]  .max-index{z-index:10000}"]}),i})(),canActivate:[x.P]}];let Ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[n.Bz.forChild(Se)],n.Bz]}),i})(),Be=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.ez,I.T],_.vT]}),i})();var Qe=r(3677),Je=r(7175);let Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[z.kkI],imports:[[C.ez,Ne,l.Rt,Be,Je.m,Z.PV,Qe.b1,z.BW0,z.MAY,z.T2N,fe,z.e6k,z.uuI,z.j5J,z.HKp,E.CT,z.KdK]]}),i})()},9470:(U,O,r)=>{r.d(O,{G:()=>d});var C=r(655),n=r(5e3),x=r(2466),g=r(263),e=r(3175),T=r(325),p=r(4401),v=r(8669),w=r(9808),k=r(2683),M=r(3087);function z(c,m){1&c&&(n.TgZ(0,"button",18),n._UZ(1,"i",19),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.login"),""))}function l(c,m){1&c&&(n.TgZ(0,"button",20),n._UZ(1,"i",19),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.register"),""))}function y(c,m){if(1&c){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){return n.CHM(f),n.oxw().goToDashboard()}),n._UZ(1,"i",22),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.dashboard"),""))}function b(c,m){if(1&c){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){return n.CHM(f),n.oxw().logout()}),n._UZ(1,"i",22),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.logout"),""))}function E(c,m){1&c&&(n.TgZ(0,"button",18),n._UZ(1,"i",23),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.login"),""))}function A(c,m){1&c&&(n.TgZ(0,"button",20),n._UZ(1,"i",23),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.register")," !"))}function h(c,m){if(1&c){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){return n.CHM(f),n.oxw().goToDashboard()}),n._UZ(1,"i",22),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.dashboard"),""))}function S(c,m){if(1&c){const f=n.EpF();n.TgZ(0,"button",21),n.NdJ("click",function(){return n.CHM(f),n.oxw().logout()}),n._UZ(1,"i",22),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&c&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"header.logout"),""))}let d=(()=>{class c{constructor(f,_,D,I,Z){var L;this.translationService=f,this.authService=_,this.cdr=D,this.chatService=I,this.router=Z,this.language=null!==(L=localStorage.getItem("language"))&&void 0!==L?L:"en",this.unreadMessageCount=0}ngOnInit(){this.isConnected=!!this.authService.getToken(),this.chatService.unreadMessageCount.subscribe(f=>{this.unreadMessageCount=f}),this.cdr.markForCheck()}languageChange(f="en"){localStorage.setItem("language",f),this.translationService.use(f)}goToDashboard(){return(0,C.mG)(this,void 0,void 0,function*(){yield this.authService.populate();const f=this.authService.currentUserValue;"student"==f.role.slug?this.router.navigate(["student/dashboard"]):"teacher"==f.role.slug?this.router.navigate(["teacher/dashboard"]):"admin"==f.role.slug&&this.router.navigate(["admin"])})}goToMessages(){this.router.navigate(["/messages"])}logout(){this.authService.purgeAuth(),this.router.navigate(["/"])}}return c.\u0275fac=function(f){return new(f||c)(n.Y36(x.sK),n.Y36(g.e),n.Y36(n.sBO),n.Y36(e.a),n.Y36(T.F0))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-header"]],decls:36,vars:19,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-white","px-md-4","px-2","py-0"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/logo.png","width","60",1,"logo"],["id","navbarNav",1,"collapse","navbar-collapse","d-none","d-md-block"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","",1,"nav-link"],[1,"nav-link"],[1,"d-inline"],[1,"mx-3","pointer",3,"nzCount","click"],["icon","inbox-outline","pack","eva",1,"d-inline-block"],["size","small",1,"language-selector",3,"selected","selectedChange"],["selected","","value","en"],["value","fr"],["nbButton","","hero","","size","small","routerLink","/login","class","mx-2",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","routerLink","/register","class"," ml-2 mr-4",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","class"," ml-2 mr-4",3,"click",4,"ngIf"],[1,"float-end","d-inline","d-md-none","mobile-menu"],["nbButton","","hero","","size","small","routerLink","/login",1,"mx-2"],["nz-icon","","nzType","user","nzTheme","outline",1,"mr-2"],["nbButton","","hero","","status","primary","size","small","routerLink","/register",1,"ml-2","mr-4"],["nbButton","","hero","","status","primary","size","small",1,"ml-2","mr-4",3,"click"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-icon","","nzType","user","nzTheme","outline",1,"mx-2"]],template:function(f,_){1&f&&(n.TgZ(0,"nav",0)(1,"a",1),n._UZ(2,"img",2),n.qZA(),n.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),n._uU(7),n.ALo(8,"translate"),n.qZA()(),n.TgZ(9,"li",5)(10,"a",7),n._uU(11),n.ALo(12,"translate"),n.qZA()(),n.TgZ(13,"li",5)(14,"a",7),n._uU(15),n.ALo(16,"translate"),n.qZA()()(),n.TgZ(17,"div",8)(18,"div",8)(19,"nz-badge",9),n.NdJ("click",function(){return _.goToMessages()}),n._UZ(20,"nb-icon",10),n.qZA()(),n.TgZ(21,"nb-select",11),n.NdJ("selectedChange",function(I){return _.languageChange(I)})("selectedChange",function(I){return _.language=I}),n.TgZ(22,"nb-option",12),n._uU(23,"\u{1f1ec}\u{1f1e7}"),n.qZA(),n.TgZ(24,"nb-option",13),n._uU(25,"\u{1f1eb}\u{1f1f7}"),n.qZA()(),n.YNc(26,z,4,3,"button",14),n.YNc(27,l,4,3,"button",15),n.YNc(28,y,4,3,"button",16),n.YNc(29,b,4,3,"button",16),n.qZA()(),n.TgZ(30,"div",17)(31,"div",8),n.YNc(32,E,4,3,"button",14),n.YNc(33,A,4,3,"button",15),n.YNc(34,h,4,3,"button",16),n.YNc(35,S,4,3,"button",16),n.qZA()()()),2&f&&(n.xp6(7),n.Oqu(n.lcZ(8,13,"header.home")),n.xp6(4),n.Oqu(n.lcZ(12,15,"header.about")),n.xp6(4),n.Oqu(n.lcZ(16,17,"header.contact")),n.xp6(4),n.Q6J("nzCount",_.unreadMessageCount),n.xp6(2),n.Q6J("selected",_.language),n.xp6(5),n.Q6J("ngIf",!_.isConnected),n.xp6(1),n.Q6J("ngIf",!_.isConnected),n.xp6(1),n.Q6J("ngIf",_.isConnected&&"/student/dashboard"!=_.router.url&&"/teacher/dashboard"!=_.router.url),n.xp6(1),n.Q6J("ngIf",_.isConnected&&("/student/dashboard"==_.router.url||"/teacher/dashboard"==_.router.url)),n.xp6(3),n.Q6J("ngIf",!_.isConnected),n.xp6(1),n.Q6J("ngIf",!_.isConnected),n.xp6(1),n.Q6J("ngIf",_.isConnected&&"/student/dashboard"!=_.router.url&&"/teacher/dashboard"!=_.router.url),n.xp6(1),n.Q6J("ngIf",_.isConnected&&("/student/dashboard"==_.router.url||"/teacher/dashboard"==_.router.url)))},directives:[T.yS,p.x7,v.fMN,v.rs,v.q51,w.O5,v.DPz,T.rH,k.w,M.Ls],pipes:[x.X$],styles:["a[_ngcontent-%COMP%]{text-decoration:none!important}.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#000}nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]  .language-selector{z-index:-1}[_nghost-%COMP%]  .ant-scroll-number-only-unit{font-weight:400;font-size:12px;line-height:20px;color:#fff!important}[_nghost-%COMP%]  .ant-badge-count{z-index:auto;min-width:20px;height:20px;padding:0 6px;white-space:nowrap;text-align:center;background:#45aca0;border-radius:10px;box-shadow:0 0 0 1px #fff}[_nghost-%COMP%]  i{transform:translateY(0)}"]}),c})()},6699:(U,O,r)=>{r.d(O,{Dz:()=>b,Rt:()=>A});var C=r(655),n=r(5e3),x=r(9439),g=r(1721),e=r(925),T=r(9808),p=r(3087),v=r(226);const w=["textEl"];function k(h,S){if(1&h&&n._UZ(0,"i",3),2&h){const d=n.oxw();n.Q6J("nzType",d.nzIcon)}}function M(h,S){if(1&h){const d=n.EpF();n.TgZ(0,"img",4),n.NdJ("error",function(m){return n.CHM(d),n.oxw().imgError(m)}),n.qZA()}if(2&h){const d=n.oxw();n.Q6J("src",d.nzSrc,n.LSH),n.uIk("srcset",d.nzSrcSet,n.LSH)("alt",d.nzAlt)}}function z(h,S){if(1&h&&(n.TgZ(0,"span",5,6),n._uU(2),n.qZA()),2&h){const d=n.oxw();n.Q6J("ngStyle",d.textStyles),n.xp6(2),n.Oqu(d.nzText)}}let b=(()=>{class h{constructor(d,c,m,f){this.nzConfigService=d,this.elementRef=c,this.cdr=m,this.platform=f,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new n.vpe,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement}imgError(d){this.nzError.emit(d),d.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}ngOnChanges(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}calcStringSize(){if(!this.hasText)return;const d=this.textEl.nativeElement.offsetWidth,c=this.el.getBoundingClientRect().width,m=2*this.nzGap<c?2*this.nzGap:8;this.textStyles={transform:`scale(${c-m<d?(c-m)/d:1}) translateX(-50%)`},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}notifyCalc(){this.platform.isBrowser&&setTimeout(()=>{this.calcStringSize()})}setSizeStyle(){this.customSize="number"==typeof this.nzSize?`${this.nzSize}px`:null,this.cdr.markForCheck()}}return h.\u0275fac=function(d){return new(d||h)(n.Y36(x.jY),n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(e.t4))},h.\u0275cmp=n.Xpm({type:h,selectors:[["nz-avatar"]],viewQuery:function(d,c){if(1&d&&n.Gf(w,5),2&d){let m;n.iGM(m=n.CRH())&&(c.textEl=m.first)}},hostAttrs:[1,"ant-avatar"],hostVars:20,hostBindings:function(d,c){2&d&&(n.Udp("width",c.customSize)("height",c.customSize)("line-height",c.customSize)("font-size",c.hasIcon&&c.customSize?c.nzSize/2:null,"px"),n.ekj("ant-avatar-lg","large"===c.nzSize)("ant-avatar-sm","small"===c.nzSize)("ant-avatar-square","square"===c.nzShape)("ant-avatar-circle","circle"===c.nzShape)("ant-avatar-icon",c.nzIcon)("ant-avatar-image",c.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[n.TTD],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(d,c){1&d&&(n.YNc(0,k,1,1,"i",0),n.YNc(1,M,1,3,"img",1),n.YNc(2,z,3,2,"span",2)),2&d&&(n.Q6J("ngIf",c.nzIcon&&c.hasIcon),n.xp6(1),n.Q6J("ngIf",c.nzSrc&&c.hasSrc),n.xp6(1),n.Q6J("ngIf",c.nzText&&c.hasText))},directives:[T.O5,p.Ls,T.PC],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,x.oS)()],h.prototype,"nzShape",void 0),(0,C.gn)([(0,x.oS)()],h.prototype,"nzSize",void 0),(0,C.gn)([(0,x.oS)(),(0,g.Rn)()],h.prototype,"nzGap",void 0),h})(),A=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=n.oAB({type:h}),h.\u0275inj=n.cJS({imports:[[v.vT,T.ez,p.PV,e.ud]]}),h})()}}]);