"use strict";(self.webpackChunkprof_front=self.webpackChunkprof_front||[]).push([[218],{8574:(k,O,r)=>{r.d(O,{P:()=>e});var f=r(655),i=r(5e3),y=r(325),g=r(263);let e=(()=>{class x{constructor(C,b){this.router=C,this.userService=b}canActivate(){return(0,f.mG)(this,void 0,void 0,function*(){return yield this.userService.populate(),!!this.userService.getToken()||(this.router.navigate(["/login"]),!1)})}}return x.\u0275fac=function(C){return new(C||x)(i.LFG(y.F0),i.LFG(g.e))},x.\u0275prov=i.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},3175:(k,O,r)=>{r.d(O,{a:()=>C});var f=r(655),i=r(591),y=r(2340),g=r(5e3),e=r(520),x=r(8393),u=r(263);let C=(()=>{class N{constructor(h,z,S){this.http=h,this.socket=z,this.userService=S,this.isRegistred=!1,this.currentRoomId=null,this.rooms=new i.X([]),this.unreadMessageCount=new i.X(0),this.audioService=new Audio,this.subscriptions=[],z.on("connect",function(){z.emit("register",{userId:S.currentUserValue.id})}),z.on("disconnect",()=>this.isRegistred=!1)}connect(h=!1){return(0,f.mG)(this,void 0,void 0,function*(){console.log(h),(!this.isRegistred||h)&&(this.isRegistred=!0,this.clearSubscriptions(),this.clearUnReadMessage(),this.subscribeToNewMessages())})}clearUnReadMessage(){this.unreadMessageCount.next(0)}clearUnReadMessageForRoom(h){const z=this.rooms.value,S=z.find(D=>D.id==h);S&&(S.new_message=!1),this.rooms.next(z)}setNewMessage(h){const z=this.rooms.value,S=z.find(w=>w.id==h.roomId);h.userId!=this.userService.currentUserValue.id&&h.roomId!=this.currentRoomId&&(S.new_message=!0),S.updated_at=(new Date).toISOString(),S.last_message=h;const D=z.sort((w,m)=>new Date(m.updated_at).getTime()-new Date(w.updated_at).getTime());this.rooms.next(D)}getMyRooms(){return(0,f.mG)(this,void 0,void 0,function*(){let h=yield this.http.get(`${y.N.chatServer}/rooms/my`).toPromise();this.rooms.next(h)})}getRoomMessages(h){return this.http.get(`${y.N.chatServer}/rooms/${h}/messages`)}createRoom(h){return h.users=h.users.map(z=>z.id),this.http.post(`${y.N.chatServer}/rooms`,h)}getRoom(h){return this.http.get(`${y.N.chatServer}/rooms/${h}`)}sendMessage(h,z=!1){z?this.http.post(`${y.N.chatServer}/messages`,h).toPromise():this.socket.emit("new_message",h)}onNewMessage(){return this.socket.fromEvent("new_message")}clearSubscriptions(){this.subscriptions.map(h=>h.unsubscribe())}subscribeToNewMessages(){const h=this.onNewMessage().subscribe(z=>{this.setNewMessage(z),z.userId!=this.userService.currentUserValue.id&&(this.audioService.src="../../../assets/mp3/message.mp3",this.audioService.load(),this.audioService.play(),z.roomId!=this.currentRoomId&&this.unreadMessageCount.next(this.unreadMessageCount.value+1))});this.subscriptions.push(h)}emitNewRoomCreate(h){this.socket.emit("new_room",h)}}return N.\u0275fac=function(h){return new(h||N)(g.LFG(e.eN),g.LFG(x.sk),g.LFG(u.e))},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})()},2171:(k,O,r)=>{r.d(O,{J:()=>g});var f=r(520),i=r(2340),y=r(5e3);let g=(()=>{class e{constructor(u){this.http=u}getMyLessons(u){const C=new f.LE({fromObject:u});return this.http.get(`${i.N.apiUrl}/lessons`,{params:C})}getAllStudentsLessons(u,C){const b=new f.LE({fromObject:u});return this.http.get(`${i.N.apiUrl}/admin/students/${C}/all-lessons`,{params:b})}getHistory(u){const C=new f.LE({fromObject:u});return this.http.get(`${i.N.apiUrl}/lessons/history`,{params:C})}find(u){return this.http.get(`${i.N.apiUrl}/lessons/${u}`)}store(u){return this.http.post(`${i.N.apiUrl}/lessons`,Object.assign({},u))}createCollabLesson(u){return this.http.post(`${i.N.apiUrl}/teacher/lesson/create`,u)}joinCollaborationLesson(u){return this.http.post(`${i.N.apiUrl}/lessons/join/${u}`,{})}cancel(u){return this.http.delete(`${i.N.apiUrl}/lessons/${u}`)}confirm(u){return this.http.put(`${i.N.apiUrl}/teacher/lesson/confirm/${u}`,{})}update(u){return this.http.put(`${i.N.apiUrl}/lessons/${u.id}`,u)}}return e.\u0275fac=function(u){return new(u||e)(y.LFG(f.eN))},e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7218:(k,O,r)=>{r.r(O),r.d(O,{ClassroomModule:()=>Ge});var f=r(9808),i=r(325),y=r(8574),g=r(655),e=r(5e3),x=r(263),u=r(591),C=r(8929),b=r(8393);let P=(()=>{class n{constructor(t){this.socket=t,this.peerConnectionSubject=new u.X(this.openRTCConnection()),this.currentRoomId=null,this.subscriptions=[],this.onNewParticipant=new C.xQ,this.onNewMessage=new C.xQ,this.onRemoteCameraChange=new C.xQ}joinRoom(t,o=!0,s=!0){return(0,g.mG)(this,void 0,void 0,function*(){this.peerConnection.onicecandidate=T=>{T.candidate&&this.socket.emit("classroom.new-ice-candidate",{candidat:T.candidate,room_id:t.room_id})},this.peerConnection.onnegotiationneeded=T=>{this.peerConnection.createOffer().then(A=>this.peerConnection.setLocalDescription(A)).then(()=>{this.socket.emit("classroom.negociating",{room_id:t.room_id,sessionDescription:this.peerConnection.localDescription})}).catch(A=>console.log(A))};const _=this.socket.fromEvent("classroom.negociating").subscribe(T=>{this.sendAnswer(T.sessionDescription)}),R=this.socket.fromEvent("classroom.answer").subscribe(T=>(0,g.mG)(this,void 0,void 0,function*(){this.peerConnection.remoteDescription||(yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(T.answer)),this.onNewParticipant.next(T))})),Z=this.socket.fromEvent("classroom.need_answer").subscribe(T=>{this.sendAnswer(T.sessionDescription,o,s)}),F=this.socket.fromEvent("classroom.new-ice-candidate").subscribe(T=>(0,g.mG)(this,void 0,void 0,function*(){const A=new RTCIceCandidate(T);try{yield this.peerConnection.addIceCandidate(A)}catch(dt){}})),B=this.socket.fromEvent("classroom.new_message").subscribe(T=>{this.onNewMessage.next(T)}),Q=this.socket.fromEvent("classroom.camera_toggle").subscribe(T=>{console.log("camera toogled",T),this.onRemoteCameraChange.next(T)}),J=this.socket.fromEvent("classroom.disconnect").subscribe(T=>{this.clearSubscription()});this.socket.emit("classroom.join",t),this.subscriptions.push(_,R,Z,F,J,B,Q)})}sendAnswer(t,o=!0,s=!0){return(0,g.mG)(this,void 0,void 0,function*(){if(this.stream||(yield this.getMediaStream(o,s),this.addTracksToPeerConnection(this.stream)),!this.peerConnection.remoteDescription){yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(t));const _=yield this.peerConnection.createAnswer();this.peerConnection.setLocalDescription(_),this.socket.emit("classroom.answer",{room_id:this.currentRoomId,answer:_}),this.onNewParticipant.next(_)}})}createOffer(t=!0,o=!0){return(0,g.mG)(this,void 0,void 0,function*(){yield this.getMediaStream(t,o),this.addTracksToPeerConnection(this.stream);let s=yield this.peerConnection.createOffer();return this.peerConnection.setLocalDescription(s),s})}startAudio(){this.stream&&this.stream.getAudioTracks().forEach(t=>t.enabled=!0)}stopAudio(){this.stream.getAudioTracks().forEach(t=>t.enabled=!1)}startVideo(){this.stream.getVideoTracks().forEach(t=>t.enabled=!0),this.socket.emit("classroom.camera_toggle",{room_id:this.currentRoomId,active:!0})}stopVideo(){this.stream.getVideoTracks().forEach(t=>t.enabled=!1),this.socket.emit("classroom.camera_toggle",{room_id:this.currentRoomId,active:!1})}sendMessage(t){this.socket.emit("classroom.new_message",t)}addTracksToPeerConnection(t){t&&t.getTracks().forEach(o=>{this.peerConnection.addTrack(o,t)})}getMediaStream(t=!0,o=!0){return(0,g.mG)(this,void 0,void 0,function*(){let s={audio:o,video:t};try{navigator.mediaDevices&&(this.stream=yield navigator.mediaDevices.getUserMedia({audio:o,video:!!t&&{width:{ideal:4096},height:{ideal:2160}}}))}catch(_){console.log(_),s={audio:!1,video:t},this.stream=yield navigator.mediaDevices.getUserMedia(s)}return s})}startScreenShare(){return(0,g.mG)(this,void 0,void 0,function*(){const t=yield navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0}),o=t.getVideoTracks()[0];if(this.videoTrack){this.videoTrack.replaceTrack(o);try{this.videoTrack=this.peerConnection.addTrack(o,this.stream)}catch(s){this.stream.getVideoTracks().forEach(_=>_.enabled=!0)}}else this.addTracksToPeerConnection(t)})}stopScreenShare(){return(0,g.mG)(this,void 0,void 0,function*(){this.stream&&this.stream.getVideoTracks().forEach(t=>{t.enabled=!1})})}openRTCConnection(){return new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]})}sendDisconnect(){this.socket.emit("classroom.disconnect",{})}clearSubscription(){this.stream&&this.stream.getTracks().map(t=>t.stop()),this.peerConnection.ontrack=null,this.peerConnection.onicecandidate=null,this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicegatheringstatechange=null,this.peerConnection.onnegotiationneeded=null,this.peerConnection.close(),this.stream=null,this.peerConnectionSubject.next(this.openRTCConnection()),this.subscriptions.map(t=>t.unsubscribe()),console.log("La connexion a \xe9t\xe9 interrompu, refreshing"),window.location.reload()}get peerConnection(){return this.peerConnectionSubject.getValue()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.sk))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var N=r(2171),v=r(8669),h=r(6699);let z=(()=>{class n{constructor(){this.isMic=!0,this.isCamera=!0,this.onCameraChange=new e.vpe,this.onMicrophoneChange=new e.vpe,this.screenSharing=!1,this.screenSharingChange=new e.vpe,this.onLeave=new e.vpe,this.onOpenChat=new e.vpe,this.unReadMessage=0,this.startDate=null,this.timeElapsed=0}ngOnInit(){setInterval(()=>{this.timeElapsed++,this.startDate=new Date(1e3*this.timeElapsed).toISOString().substr(14,5)},1e3)}microphoneChange(){this.isMic=!this.isMic,this.onMicrophoneChange.emit(this.isMic)}cameraChange(){this.isCamera=!this.isCamera,this.onCameraChange.emit(this.isCamera)}onScreenSharingChange(){this.screenSharing=!this.screenSharing,this.screenSharingChange.emit(this.screenSharing)}onOpenChatFn(){this.onOpenChat.emit()}leave(){this.onLeave.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-call-controls"]],inputs:{screenSharing:"screenSharing",unReadMessage:"unReadMessage"},outputs:{onCameraChange:"onCameraChange",onMicrophoneChange:"onMicrophoneChange",screenSharingChange:"screenSharingChange",onLeave:"onLeave",onOpenChat:"onOpenChat"},decls:9,vars:11,consts:[[1,"call-controls"],[1,"text-center","text-grey"],["size","small"],[1,"text-primary","pointer",3,"icon","click"],["badgePosition","top left","badgeStatus","primary","icon","message-square-outline",3,"badgeDot","click"],["icon","phone-off-outline",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"nb-actions",2)(4,"nb-action",3),e.NdJ("click",function(){return o.microphoneChange()}),e.qZA(),e.TgZ(5,"nb-action",3),e.NdJ("click",function(){return o.cameraChange()}),e.qZA(),e.TgZ(6,"nb-action",3),e.NdJ("click",function(){return o.onScreenSharingChange()}),e.qZA(),e.TgZ(7,"nb-action",4),e.NdJ("click",function(){return o.onOpenChatFn()}),e.qZA(),e.TgZ(8,"nb-action",5),e.NdJ("click",function(){return o.leave()}),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(o.startDate),e.xp6(2),e.ekj("active",o.isMic),e.Q6J("icon",o.isMic?"mic-outline":"mic-off-outline"),e.xp6(1),e.ekj("active",o.isCamera),e.Q6J("icon",o.isCamera?"video-outline":"video-off-outline"),e.xp6(1),e.ekj("active",o.screenSharing),e.Q6J("icon","monitor-outline"),e.xp6(1),e.Q6J("badgeDot",o.unReadMessage>0))},directives:[v.lYD,v.Bk3],styles:["[_nghost-%COMP%]  .ant-card-body{display:none}[_nghost-%COMP%]  ul li:last-child{background-color:red;color:#fff}[_nghost-%COMP%]  .ant-card-actions>li{float:left;padding:12px 0!important;margin:0!important}[_nghost-%COMP%]  .text-grey{color:#8f9bb3}[_nghost-%COMP%]  nb-actions{background:white;padding:12px;border-radius:7px}[_nghost-%COMP%]  .active nb-icon{color:#45aca0}.call-controls[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:50%;transform:translate(-50%)}"]}),n})();var S=r(9470),D=r(3713),w=r(1159),m=r(1314),d=r(7429),l=r(7625),c=r(9439),p=r(1721),M=r(5664),E=r(226),U=r(4832),I=r(969),L=r(3087);const V=["drawerTemplate"];function $(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).maskClick()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.nzMaskStyle)}}function K(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"i",19),e.BQk()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("nzType",t)}}function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).closeClick()}),e.YNc(1,K,2,1,"ng-container",18),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzCloseIcon)}}function q(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.nzTitle,e.oJD)}}function ee(n,a){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,q,2,1,"ng-container",18),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzTitle)}}function te(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.nzExtra,e.oJD)}}function ne(n,a){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,te,2,1,"ng-container",18),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzExtra)}}function ie(n,a){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13),e.YNc(2,X,2,1,"button",14),e.YNc(3,ee,2,1,"div",15),e.qZA(),e.YNc(4,ne,2,1,"div",16),e.qZA()),2&n){const t=e.oxw(2);e.ekj("ant-drawer-header-close-only",!t.nzTitle),e.xp6(2),e.Q6J("ngIf",t.nzClosable),e.xp6(1),e.Q6J("ngIf",t.nzTitle),e.xp6(1),e.Q6J("ngIf",t.nzExtra)}}function oe(n,a){}function ae(n,a){1&n&&e.GkF(0)}function re(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ae,1,0,"ng-container",24),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.nzContent)("ngTemplateOutletContext",t.templateContext)}}function se(n,a){if(1&n&&(e.ynx(0),e.YNc(1,re,2,2,"ng-container",23),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isTemplateRef(t.nzContent))}}function ce(n,a){}function le(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ce,0,0,"ng-template",25),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.contentFromContentChild)}}function de(n,a){if(1&n&&e.YNc(0,le,2,1,"ng-container",23),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.contentFromContentChild&&(t.isOpen||t.inAnimation))}}function pe(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"div",21),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.nzFooter,e.oJD)}}function he(n,a){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,pe,2,1,"ng-container",18),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzFooter)}}function ue(n,a){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,$,1,1,"div",2),e.TgZ(2,"div")(3,"div",3)(4,"div",4),e.YNc(5,ie,5,5,"div",5),e.TgZ(6,"div",6),e.YNc(7,oe,0,0,"ng-template",7),e.YNc(8,se,2,1,"ng-container",8),e.YNc(9,de,1,1,"ng-template",null,9,e.W1O),e.qZA(),e.YNc(11,he,2,1,"div",10),e.qZA()()()()),2&n){const t=e.MAs(10),o=e.oxw();e.Udp("transform",o.offsetTransform)("transition",o.placementChanging?"none":null)("z-index",o.nzZIndex),e.ekj("ant-drawer-rtl","rtl"===o.dir)("ant-drawer-open",o.isOpen)("no-mask",!o.nzMask)("ant-drawer-top","top"===o.nzPlacement)("ant-drawer-bottom","bottom"===o.nzPlacement)("ant-drawer-right","right"===o.nzPlacement)("ant-drawer-left","left"===o.nzPlacement),e.Q6J("nzNoAnimation",o.nzNoAnimation),e.xp6(1),e.Q6J("ngIf",o.nzMask),e.xp6(1),e.Gre("ant-drawer-content-wrapper ",o.nzWrapClassName,""),e.Udp("width",o.width)("height",o.height)("transform",o.transform)("transition",o.placementChanging?"none":null),e.xp6(2),e.Udp("height",o.isLeftOrRight?"100%":null),e.xp6(1),e.Q6J("ngIf",o.nzTitle||o.nzClosable),e.xp6(1),e.Q6J("ngStyle",o.nzBodyStyle),e.xp6(2),e.Q6J("ngIf",o.nzContent)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",o.nzFooter)}}let G=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.Rgc))},n.\u0275dir=e.lG2({type:n,selectors:[["","nzDrawerContent",""]],exportAs:["nzDrawerContent"]}),n})();class j{}let W=(()=>{class n extends j{constructor(t,o,s,_,R,Z,F,B,Q,J,T){super(),this.cdr=t,this.document=o,this.nzConfigService=s,this.renderer=_,this.overlay=R,this.injector=Z,this.changeDetectorRef=F,this.focusTrapFactory=B,this.viewContainerRef=Q,this.overlayKeyboardDispatcher=J,this.directionality=T,this._nzModuleName="drawer",this.nzCloseIcon="close",this.nzClosable=!0,this.nzMaskClosable=!0,this.nzMask=!0,this.nzCloseOnNavigation=!0,this.nzNoAnimation=!1,this.nzKeyboard=!0,this.nzPlacement="right",this.nzSize="default",this.nzMaskStyle={},this.nzBodyStyle={},this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.componentInstance=null,this.nzOnViewInit=new e.vpe,this.nzOnClose=new e.vpe,this.nzVisibleChange=new e.vpe,this.destroy$=new C.xQ,this.placementChanging=!1,this.placementChangeTimeoutId=-1,this.isOpen=!1,this.inAnimation=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new C.xQ,this.nzAfterClose=new C.xQ,this.nzDirection=void 0,this.dir="ltr"}set nzVisible(t){this.isOpen=t}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){if(this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,p.WX)(void 0===this.nzWidth?t:this.nzWidth)}return null}get height(){if(!this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,p.WX)(void 0===this.nzHeight?t:this.nzHeight)}return null}get isLeftOrRight(){return"left"===this.nzPlacement||"right"===this.nzPlacement}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}isTemplateRef(t){return t instanceof e.Rgc}ngOnInit(){var t;null===(t=this.directionality.change)||void 0===t||t.pipe((0,l.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.nzDirection||this.directionality.value,this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),this.nzOnViewInit.observers.length&&setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(t){const{nzPlacement:o,nzVisible:s}=t;s&&(t.nzVisible.currentValue?this.open():this.close()),o&&!o.isFirstChange()&&this.triggerPlacementChangeCycleOnce()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),clearTimeout(this.placementChangeTimeoutId),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:300}triggerPlacementChangeCycleOnce(){this.nzNoAnimation||(this.placementChanging=!0,this.changeDetectorRef.markForCheck(),clearTimeout(this.placementChangeTimeoutId),this.placementChangeTimeoutId=setTimeout(()=>{this.placementChanging=!1,this.changeDetectorRef.markForCheck()},this.getAnimationDuration()))}close(t){this.isOpen=!1,this.inAnimation=!0,this.nzVisibleChange.emit(!1),this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.inAnimation=!1,this.nzAfterClose.next(t),this.nzAfterClose.complete(),this.componentInstance=null},this.getAnimationDuration())}open(){this.attachOverlay(),this.isOpen=!0,this.inAnimation=!0,this.nzVisibleChange.emit(!0),this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.inAnimation=!1,this.changeDetectorRef.detectChanges(),this.nzAfterOpen.next()},this.getAnimationDuration())}getContentComponent(){return this.componentInstance}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof e.DyG){const t=e.zs3.create({parent:this.injector,providers:[{provide:j,useValue:this}]}),o=new d.C5(this.nzContent,null,t),s=this.bodyPortalOutlet.attachComponentPortal(o);this.componentInstance=s.instance,Object.assign(s.instance,this.nzContentParams),s.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new d.UE(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe((0,l.R)(this.destroy$)).subscribe(t=>{t.keyCode===w.hY&&this.isOpen&&this.nzKeyboard&&this.nzOnClose.emit()}),this.overlayRef.detachments().pipe((0,l.R)(this.destroy$)).subscribe(()=>{this.disposeOverlay()}))}disposeOverlay(){var t;null===(t=this.overlayRef)||void 0===t||t.dispose(),this.overlayRef=null}getOverlayConfig(){return new m.X_({disposeOnNavigation:this.nzCloseOnNavigation,positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.blur&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(f.K0,8),e.Y36(c.jY),e.Y36(e.Qsj),e.Y36(m.aV),e.Y36(e.zs3),e.Y36(e.sBO),e.Y36(M.qV),e.Y36(e.s_b),e.Y36(m.Vs),e.Y36(E.Is,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-drawer"]],contentQueries:function(t,o,s){if(1&t&&e.Suo(s,G,7,e.Rgc),2&t){let _;e.iGM(_=e.CRH())&&(o.contentFromContentChild=_.first)}},viewQuery:function(t,o){if(1&t&&(e.Gf(V,7),e.Gf(d.Pl,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.drawerTemplate=s.first),e.iGM(s=e.CRH())&&(o.bodyPortalOutlet=s.first)}},inputs:{nzContent:"nzContent",nzCloseIcon:"nzCloseIcon",nzClosable:"nzClosable",nzMaskClosable:"nzMaskClosable",nzMask:"nzMask",nzCloseOnNavigation:"nzCloseOnNavigation",nzNoAnimation:"nzNoAnimation",nzKeyboard:"nzKeyboard",nzTitle:"nzTitle",nzExtra:"nzExtra",nzFooter:"nzFooter",nzPlacement:"nzPlacement",nzSize:"nzSize",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWrapClassName:"nzWrapClassName",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:"nzVisible"},outputs:{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzDrawer"],features:[e.qOj,e.TTD],decls:2,vars:0,consts:[["drawerTemplate",""],[1,"ant-drawer",3,"nzNoAnimation"],["class","ant-drawer-mask",3,"ngStyle","click",4,"ngIf"],[1,"ant-drawer-content"],[1,"ant-drawer-wrapper-body"],["class","ant-drawer-header",3,"ant-drawer-header-close-only",4,"ngIf"],[1,"ant-drawer-body",3,"ngStyle"],["cdkPortalOutlet",""],[4,"ngIf","ngIfElse"],["contentElseTemp",""],["class","ant-drawer-footer",4,"ngIf"],[1,"ant-drawer-mask",3,"ngStyle","click"],[1,"ant-drawer-header"],[1,"ant-drawer-header-title"],["aria-label","Close","class","ant-drawer-close","style","--scroll-bar: 0px;",3,"click",4,"ngIf"],["class","ant-drawer-title",4,"ngIf"],["class","ant-drawer-extra",4,"ngIf"],["aria-label","Close",1,"ant-drawer-close",2,"--scroll-bar","0px",3,"click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"],[1,"ant-drawer-title"],[3,"innerHTML"],[1,"ant-drawer-extra"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"ant-drawer-footer"]],template:function(t,o){1&t&&e.YNc(0,ue,12,40,"ng-template",null,0,e.W1O)},directives:[U.P,f.O5,f.PC,I.f,L.Ls,d.Pl,f.tP],encapsulation:2,changeDetection:0}),(0,g.gn)([(0,p.yF)()],n.prototype,"nzClosable",void 0),(0,g.gn)([(0,c.oS)(),(0,p.yF)()],n.prototype,"nzMaskClosable",void 0),(0,g.gn)([(0,c.oS)(),(0,p.yF)()],n.prototype,"nzMask",void 0),(0,g.gn)([(0,c.oS)(),(0,p.yF)()],n.prototype,"nzCloseOnNavigation",void 0),(0,g.gn)([(0,p.yF)()],n.prototype,"nzNoAnimation",void 0),(0,g.gn)([(0,p.yF)()],n.prototype,"nzKeyboard",void 0),(0,g.gn)([(0,c.oS)()],n.prototype,"nzDirection",void 0),n})(),ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[E.vT,f.ez,m.U8,d.eL,L.PV,I.T,U.g,ge]]}),n})();const Ce=["participantVideo"],ve=["videoFallBack"];function ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-call-controls",13),e.NdJ("unReadMessageChange",function(s){return e.CHM(t),e.oxw().unReadMessage=s})("screenSharingChange",function(s){return e.CHM(t),e.oxw().inputs.screenShare=s})("onOpenChat",function(){return e.CHM(t),e.oxw().openChat()})("screenSharingChange",function(s){return e.CHM(t),e.oxw().onScreenSharingChange(s)})("onLeave",function(){return e.CHM(t),e.oxw().leaveSession()})("onMicrophoneChange",function(s){return e.CHM(t),e.oxw().onMicrophoneChange(s)})("onCameraChange",function(s){return e.CHM(t),e.oxw().toogleCamera(s)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("unReadMessage",t.unReadMessage)("screenSharing",t.inputs.screenShare)}}function ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"app-header"),e.TgZ(2,"h4",14),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",15),e._UZ(6,"ng-lottie",16),e.qZA(),e.TgZ(7,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().initConnection()}),e._uU(8,"Connect to classroom"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij("Lesson ",e.xi3(4,2,null==t.lesson?null:t.lesson.scheduled_at,"MMM d, y, h:mm a"),""),e.xp6(3),e.Q6J("options",t.options)}}function xe(n,a){if(1&n&&e._UZ(0,"nb-chat-message",21),2&n){const t=a.$implicit;e.Q6J("files",t.files)("type",t.type)("message",t.message)("reply",t.reply)("sender",t.user.firstname)("date",t.date)("avatar",t.user.image)}}function Te(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"nb-chat",18),e.YNc(2,xe,1,7,"nb-chat-message",19),e.TgZ(3,"nb-chat-form",20),e.NdJ("send",function(s){return e.CHM(t),e.oxw().sendMessage(s)}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.messages),e.xp6(1),e.Q6J("dropFiles",!0)}}const Se=[{path:":id",component:(()=>{class n{constructor(t,o,s,_){this.route=t,this.userService=o,this.callService=s,this.lessonService=_,this.participants=0,this.options={path:"/assets/animations/education.json"},this.audioEncode=!1,this.audioDecode=!1,this.connected=!1,this.inputs={camera:!0,mic:!0,screenShare:!1,chat:!1},this.messages=[],this.name=this.userService.currentUserValue.firstname+" "+this.userService.currentUserValue.lastname,this.unReadMessage=0,this.started=!1,this.lesson=null}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.lesson_id=this.route.snapshot.params.id,this.callService.currentRoomId=this.lesson_id,this.lesson=yield this.lessonService.find(this.lesson_id).toPromise(),this.getConnectedUser()})}initConnection(){return(0,g.mG)(this,void 0,void 0,function*(){this.connected||(this.connected=!0,yield this.callService.joinRoom({room_id:this.lesson_id,user_id:this.userService.currentUserValue.id,sessionDescription:yield this.callService.createOffer(this.inputs.camera,this.inputs.mic)}),this.startVideoFallback(),this.callService.peerConnection.ontrack=t=>{this.started=!0,this.participantVideo.nativeElement.srcObject=t.streams[0]},this.callService.onNewParticipant.subscribe(t=>{this.started=!0}),this.callService.onNewMessage.subscribe(t=>{const o=t.type;t.type="text"!=t.type?"file":"text","file"==t.type&&(t.files=[{url:t.content,type:o,icon:"file-text-outline"}]),t.reply=this.userService.currentUserValue.id==t.user_id,t.user=t.reply?this.userService.currentUserValue:this.connectedUser,this.messages.push(t),this.inputs.chat||this.unReadMessage++,console.log(t)}),this.callService.onRemoteCameraChange.subscribe(t=>{this.connectedUser.camera=t.active}))})}toogleCamera(t){this.inputs.camera=t,t?this.callService.startVideo():this.callService.stopVideo()}onMicrophoneChange(t){this.inputs.mic=t,t?this.callService.stopAudio():this.callService.startAudio()}onScreenSharingChange(t){this.inputs.screenShare=t,t?this.callService.startScreenShare():(this.callService.stopScreenShare(),this.inputs.camera&&this.toogleCamera(!0))}openChat(){this.unReadMessage=0,this.inputs.chat=!0}sendMessage(t){if(t.files.length){let o=t.files?t.files.map(s=>({data:s,type:s.type,name:s.name})):[];t.files=o}t.date=(new Date).getTime(),t.room_id=this.lesson_id,t.user_id=this.userService.currentUserValue.id,this.callService.sendMessage(t)}getConnectedUser(){this.connectedUser=this.userService.currentUserValue.id==this.lesson.teacher_id?this.lesson.students[0]||null:this.lesson.teacher,this.connectedUser.camera=!0,console.log(this.connectedUser)}startVideoFallback(){this.callService.stream&&(this.videoFallBack.nativeElement.srcObject=this.callService.stream)}leaveSession(){this.callService.sendDisconnect(),this.callService.clearSubscription()}getInitial(){var t,o,s,_;return(null===(o=null===(t=this.connectedUser)||void 0===t?void 0:t.firstname)||void 0===o?void 0:o.charAt(0))+(null===(_=null===(s=this.connectedUser)||void 0===s?void 0:s.lastname)||void 0===_?void 0:_.charAt(0))}ngOnDestroy(){this.callService.sendDisconnect(),this.callService.clearSubscription()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.gz),e.Y36(x.e),e.Y36(P),e.Y36(N.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-classroom"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ce,5),e.Gf(ve,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.participantVideo=s.first),e.iGM(s=e.CRH())&&(o.videoFallBack=s.first)}},decls:18,vars:19,consts:[["nbSpinnerStatus","primary","nbSpinnerMessage","Waiting for remote to connect",3,"nbSpinner"],["autoplay","","playsinline","","id","participants-video",1,"w-100","h-100"],["participantVideo",""],[1,"cover"],[1,"center"],[1,"bg-primary",3,"nzSize","nzText"],[1,"text-center","mt-3","text-grey"],["autoplay","","playsinline","","id","video",1,"video-fallback","max-index",3,"muted"],["videoFallBack",""],[3,"unReadMessage","screenSharing","unReadMessageChange","screenSharingChange","onOpenChat","onLeave","onMicrophoneChange","onCameraChange",4,"ngIf"],[4,"ngIf"],["nzPlacement","left","nzSize","large",3,"nzClosable","nzVisible","nzTitle","nzOnClose"],[4,"nzDrawerContent"],[3,"unReadMessage","screenSharing","unReadMessageChange","screenSharingChange","onOpenChat","onLeave","onMicrophoneChange","onCameraChange"],[1,"text-grey","text-center","mt-4"],[1,"d-block","mx-auto",2,"width","40%"],[3,"options"],["nbButton","","hero","","size","large","status","primary",1,"d-block","mx-auto",3,"click"],["title","Conversation"],["dateFormat","shortTime",3,"files","type","message","reply","sender","date","avatar",4,"ngFor","ngForOf"],[3,"dropFiles","send"],["dateFormat","shortTime",3,"files","type","message","reply","sender","date","avatar"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"div")(3,"div",0),e._UZ(4,"video",1,2),e.TgZ(6,"div")(7,"div",3)(8,"div",4),e._UZ(9,"nz-avatar",5),e.TgZ(10,"p",6),e._uU(11),e.qZA()()()()(),e._UZ(12,"video",7,8),e.YNc(14,ze,1,2,"app-call-controls",9),e.qZA(),e.YNc(15,ye,9,5,"div",10),e.TgZ(16,"nz-drawer",11),e.NdJ("nzOnClose",function(){return o.inputs.chat=!1}),e.YNc(17,Te,4,2,"ng-container",12),e.qZA()()()),2&t&&(e.xp6(2),e.ekj("d-none",!o.connected),e.xp6(1),e.Q6J("nbSpinner",!o.started&&o.connected),e.xp6(1),e.ekj("d-none",!(null!=o.connectedUser&&o.connectedUser.camera)),e.xp6(2),e.ekj("d-none",null==o.connectedUser?null:o.connectedUser.camera),e.xp6(3),e.Q6J("nzSize",150)("nzText",o.getInitial()),e.xp6(2),e.AsE("",null==o.connectedUser?null:o.connectedUser.firstname," ",null==o.connectedUser?null:o.connectedUser.lastname,""),e.xp6(1),e.ekj("invisible",!o.inputs.camera),e.Q6J("muted",!0),e.xp6(2),e.Q6J("ngIf",o.started),e.xp6(1),e.Q6J("ngIf",!o.connected),e.xp6(1),e.Q6J("nzClosable",!0)("nzVisible",o.inputs.chat)("nzTitle",null))},directives:[v.Aqw,v.dP_,v.Q7R,h.Dz,f.O5,z,S.G,D.e$,v.DPz,W,G,v.vTO,f.sg,v.ksC,v.iMi],pipes:[f.uU],styles:[".call-controls[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:50%;transform:translate(-50%)}.video-fallback[_ngcontent-%COMP%]{position:fixed;bottom:50px;right:50px;width:400px;height:220px;border-radius:25px}.cover[_ngcontent-%COMP%]{z-index:100;width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]  .ant-avatar-string{font-size:50px}[_nghost-%COMP%]  .bg-primary{background-color:var(--text-primary-color)!important}[_nghost-%COMP%]  .ant-avatar-string{position:inherit;left:0px}[_nghost-%COMP%]  .center{position:absolute;top:50%;transform:translateY(-50%)}[_nghost-%COMP%]  .text-grey{color:#8f9bb3}[_nghost-%COMP%]  .max-index{z-index:10000}"]}),n})(),canActivate:[y.P]}];let Ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[i.Bz.forChild(Se)],i.Bz]}),n})(),Be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.ez,I.T],E.vT]}),n})();var Qe=r(3677),Je=r(7175);let Ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[v.kkI],imports:[[f.ez,Ne,h.Rt,Be,Je.m,L.PV,Qe.b1,v.BW0,v.MAY,v.T2N,fe,v.e6k,v.uuI,v.j5J,v.HKp,D.CT,v.KdK]]}),n})()},9470:(k,O,r)=>{r.d(O,{G:()=>m});var f=r(655),i=r(5e3),y=r(2466),g=r(263),e=r(3175),x=r(325),u=r(4401),C=r(8669),b=r(9808),P=r(2683),N=r(3087);function v(d,l){1&d&&(i.TgZ(0,"button",18),i._UZ(1,"i",19),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.login"),""))}function h(d,l){1&d&&(i.TgZ(0,"button",20),i._UZ(1,"i",19),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.register"),""))}function z(d,l){if(1&d){const c=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){return i.CHM(c),i.oxw().goToDashboard()}),i._UZ(1,"i",22),i._uU(2),i.ALo(3,"translate"),i.qZA()}2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.dashboard"),""))}function S(d,l){if(1&d){const c=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){return i.CHM(c),i.oxw().logout()}),i._UZ(1,"i",22),i._uU(2),i.ALo(3,"translate"),i.qZA()}2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.logout"),""))}function D(d,l){1&d&&(i.TgZ(0,"button",18),i._UZ(1,"i",23),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.login"),""))}function w(d,l){1&d&&(i.TgZ(0,"button",20),i._UZ(1,"i",23),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&d&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"header.register")," !"))}let m=(()=>{class d{constructor(c,p,M,E,U){var I;this.translationService=c,this.authService=p,this.cdr=M,this.chatService=E,this.router=U,this.language=null!==(I=localStorage.getItem("language"))&&void 0!==I?I:"en",this.unreadMessageCount=0}ngOnInit(){this.isConnected=!!this.authService.getToken(),this.chatService.unreadMessageCount.subscribe(c=>{this.unreadMessageCount=c}),this.cdr.markForCheck()}languageChange(c="en"){localStorage.setItem("language",c),this.translationService.use(c)}goToDashboard(){return(0,f.mG)(this,void 0,void 0,function*(){yield this.authService.populate();const c=this.authService.currentUserValue;"student"==c.role.slug?this.router.navigate(["student/dashboard"]):"teacher"==c.role.slug?this.router.navigate(["teacher/dashboard"]):"admin"==c.role.slug&&this.router.navigate(["admin"])})}goToMessages(){this.router.navigate(["/messages"])}logout(){this.authService.purgeAuth(),this.router.navigate(["/"])}}return d.\u0275fac=function(c){return new(c||d)(i.Y36(y.sK),i.Y36(g.e),i.Y36(i.sBO),i.Y36(e.a),i.Y36(x.F0))},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-header"]],decls:34,vars:17,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-white","px-4","py-0"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/logo.png","width","60",1,"logo"],["id","navbarNav",1,"collapse","navbar-collapse","d-none","d-md-block"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","",1,"nav-link"],[1,"nav-link"],[1,"d-inline"],[1,"mx-3","pointer",3,"nzCount","click"],["icon","inbox-outline","pack","eva",1,"d-inline-block"],["size","small",1,"language-selector",3,"selected","selectedChange"],["selected","","value","en"],["value","fr"],["nbButton","","hero","","size","small","routerLink","/login","class","mx-2",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","routerLink","/register","class"," ms-2 me-4",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","class"," ms-2 me-4",3,"click",4,"ngIf"],[1,"float-end","d-inline","d-md-none","mobile-menu"],["nbButton","","hero","","size","small","routerLink","/login",1,"mx-2"],["nz-icon","","nzType","user","nzTheme","outline",1,"me-2"],["nbButton","","hero","","status","primary","size","small","routerLink","/register",1,"ms-2","me-4"],["nbButton","","hero","","status","primary","size","small",1,"ms-2","me-4",3,"click"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-icon","","nzType","user","nzTheme","outline",1,"mx-2"]],template:function(c,p){1&c&&(i.TgZ(0,"nav",0)(1,"a",1),i._UZ(2,"img",2),i.qZA(),i.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),i._uU(7),i.ALo(8,"translate"),i.qZA()(),i.TgZ(9,"li",5)(10,"a",7),i._uU(11),i.ALo(12,"translate"),i.qZA()(),i.TgZ(13,"li",5)(14,"a",7),i._uU(15),i.ALo(16,"translate"),i.qZA()()(),i.TgZ(17,"div",8)(18,"div",8)(19,"nz-badge",9),i.NdJ("click",function(){return p.goToMessages()}),i._UZ(20,"nb-icon",10),i.qZA()(),i.TgZ(21,"nb-select",11),i.NdJ("selectedChange",function(E){return p.languageChange(E)})("selectedChange",function(E){return p.language=E}),i.TgZ(22,"nb-option",12),i._uU(23,"\u{1f1ec}\u{1f1e7}"),i.qZA(),i.TgZ(24,"nb-option",13),i._uU(25,"\u{1f1eb}\u{1f1f7}"),i.qZA()(),i.YNc(26,v,4,3,"button",14),i.YNc(27,h,4,3,"button",15),i.YNc(28,z,4,3,"button",16),i.YNc(29,S,4,3,"button",16),i.qZA()(),i.TgZ(30,"div",17)(31,"div",8),i.YNc(32,D,4,3,"button",14),i.YNc(33,w,4,3,"button",15),i.qZA()()()),2&c&&(i.xp6(7),i.Oqu(i.lcZ(8,11,"header.home")),i.xp6(4),i.Oqu(i.lcZ(12,13,"header.about")),i.xp6(4),i.Oqu(i.lcZ(16,15,"header.contact")),i.xp6(4),i.Q6J("nzCount",p.unreadMessageCount),i.xp6(2),i.Q6J("selected",p.language),i.xp6(5),i.Q6J("ngIf",!p.isConnected),i.xp6(1),i.Q6J("ngIf",!p.isConnected),i.xp6(1),i.Q6J("ngIf",p.isConnected&&"/student/dashboard"!=p.router.url&&"/teacher/dashboard"!=p.router.url),i.xp6(1),i.Q6J("ngIf",p.isConnected&&("/student/dashboard"==p.router.url||"/teacher/dashboard"==p.router.url)),i.xp6(3),i.Q6J("ngIf",!p.isConnected),i.xp6(1),i.Q6J("ngIf",!p.isConnected))},directives:[x.yS,u.x7,C.fMN,C.rs,C.q51,b.O5,C.DPz,x.rH,P.w,N.Ls],pipes:[y.X$],styles:["a[_ngcontent-%COMP%]{text-decoration:none!important}.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#000}nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]  .language-selector{z-index:-1}[_nghost-%COMP%]  .ant-scroll-number-only-unit{font-weight:400;font-size:12px;line-height:20px;color:#fff!important}[_nghost-%COMP%]  .ant-badge-count{z-index:auto;min-width:20px;height:20px;padding:0 6px;white-space:nowrap;text-align:center;background:#45aca0;border-radius:10px;box-shadow:0 0 0 1px #fff}[_nghost-%COMP%]  i{transform:translateY(0)}"]}),d})()},6699:(k,O,r)=>{r.d(O,{Dz:()=>S,Rt:()=>w});var f=r(655),i=r(5e3),y=r(9439),g=r(1721),e=r(925),x=r(9808),u=r(3087),C=r(226);const b=["textEl"];function P(m,d){if(1&m&&i._UZ(0,"i",3),2&m){const l=i.oxw();i.Q6J("nzType",l.nzIcon)}}function N(m,d){if(1&m){const l=i.EpF();i.TgZ(0,"img",4),i.NdJ("error",function(p){return i.CHM(l),i.oxw().imgError(p)}),i.qZA()}if(2&m){const l=i.oxw();i.Q6J("src",l.nzSrc,i.LSH),i.uIk("srcset",l.nzSrcSet,i.LSH)("alt",l.nzAlt)}}function v(m,d){if(1&m&&(i.TgZ(0,"span",5,6),i._uU(2),i.qZA()),2&m){const l=i.oxw();i.Q6J("ngStyle",l.textStyles),i.xp6(2),i.Oqu(l.nzText)}}let S=(()=>{class m{constructor(l,c,p,M){this.nzConfigService=l,this.elementRef=c,this.cdr=p,this.platform=M,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new i.vpe,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement}imgError(l){this.nzError.emit(l),l.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}ngOnChanges(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}calcStringSize(){if(!this.hasText)return;const l=this.textEl.nativeElement.offsetWidth,c=this.el.getBoundingClientRect().width,p=2*this.nzGap<c?2*this.nzGap:8;this.textStyles={transform:`scale(${c-p<l?(c-p)/l:1}) translateX(-50%)`},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}notifyCalc(){this.platform.isBrowser&&setTimeout(()=>{this.calcStringSize()})}setSizeStyle(){this.customSize="number"==typeof this.nzSize?`${this.nzSize}px`:null,this.cdr.markForCheck()}}return m.\u0275fac=function(l){return new(l||m)(i.Y36(y.jY),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(e.t4))},m.\u0275cmp=i.Xpm({type:m,selectors:[["nz-avatar"]],viewQuery:function(l,c){if(1&l&&i.Gf(b,5),2&l){let p;i.iGM(p=i.CRH())&&(c.textEl=p.first)}},hostAttrs:[1,"ant-avatar"],hostVars:20,hostBindings:function(l,c){2&l&&(i.Udp("width",c.customSize)("height",c.customSize)("line-height",c.customSize)("font-size",c.hasIcon&&c.customSize?c.nzSize/2:null,"px"),i.ekj("ant-avatar-lg","large"===c.nzSize)("ant-avatar-sm","small"===c.nzSize)("ant-avatar-square","square"===c.nzShape)("ant-avatar-circle","circle"===c.nzShape)("ant-avatar-icon",c.nzIcon)("ant-avatar-image",c.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[i.TTD],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(l,c){1&l&&(i.YNc(0,P,1,1,"i",0),i.YNc(1,N,1,3,"img",1),i.YNc(2,v,3,2,"span",2)),2&l&&(i.Q6J("ngIf",c.nzIcon&&c.hasIcon),i.xp6(1),i.Q6J("ngIf",c.nzSrc&&c.hasSrc),i.xp6(1),i.Q6J("ngIf",c.nzText&&c.hasText))},directives:[x.O5,u.Ls,x.PC],encapsulation:2,changeDetection:0}),(0,f.gn)([(0,y.oS)()],m.prototype,"nzShape",void 0),(0,f.gn)([(0,y.oS)()],m.prototype,"nzSize",void 0),(0,f.gn)([(0,y.oS)(),(0,g.Rn)()],m.prototype,"nzGap",void 0),m})(),w=(()=>{class m{}return m.\u0275fac=function(l){return new(l||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[C.vT,x.ez,u.PV,e.ud]]}),m})()}}]);