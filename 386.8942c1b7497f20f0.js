"use strict";(self.webpackChunkprof_front=self.webpackChunkprof_front||[]).push([[386],{8574:(b,D,i)=>{i.d(D,{P:()=>T});var t=i(655),e=i(5e3),_=i(325),C=i(263);let T=(()=>{class g{constructor(h,v){this.router=h,this.userService=v}canActivate(){return(0,t.mG)(this,void 0,void 0,function*(){return yield this.userService.populate(),!!this.userService.getToken()||(this.router.navigate(["/login"]),!1)})}}return g.\u0275fac=function(h){return new(h||g)(e.LFG(_.F0),e.LFG(C.e))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},3175:(b,D,i)=>{i.d(D,{a:()=>h});var t=i(655),e=i(591),_=i(2340),C=i(5e3),T=i(520),g=i(8393),E=i(263);let h=(()=>{class p{constructor(s,d,m){this.http=s,this.socket=d,this.userService=m,this.isRegistred=!1,this.currentRoomId=null,this.rooms=new e.X([]),this.unreadMessageCount=new e.X(0),this.audioService=new Audio,this.subscriptions=[],d.on("connect",function(){d.emit("register",{userId:m.currentUserValue.id})}),d.on("disconnect",()=>this.isRegistred=!1)}connect(s=!1){return(0,t.mG)(this,void 0,void 0,function*(){console.log(s),(!this.isRegistred||s)&&(this.isRegistred=!0,this.clearSubscriptions(),this.clearUnReadMessage(),this.subscribeToNewMessages())})}clearUnReadMessage(){this.unreadMessageCount.next(0)}clearUnReadMessageForRoom(s){const d=this.rooms.value,m=d.find(y=>y.id==s);m&&(m.new_message=!1),this.rooms.next(d)}setNewMessage(s){const d=this.rooms.value,m=d.find(O=>O.id==s.roomId);s.userId!=this.userService.currentUserValue.id&&s.roomId!=this.currentRoomId&&(m.new_message=!0),m.updated_at=(new Date).toISOString(),m.last_message=s;const y=d.sort((O,R)=>new Date(R.updated_at).getTime()-new Date(O.updated_at).getTime());this.rooms.next(y)}getMyRooms(){return(0,t.mG)(this,void 0,void 0,function*(){let s=yield this.http.get(`${_.N.chatServer}/rooms/my`).toPromise();this.rooms.next(s)})}getRoomMessages(s){return this.http.get(`${_.N.chatServer}/rooms/${s}/messages`)}createRoom(s){return s.users=s.users.map(d=>d.id),this.http.post(`${_.N.chatServer}/rooms`,s)}getRoom(s){return this.http.get(`${_.N.chatServer}/rooms/${s}`)}sendMessage(s,d=!1){d?this.http.post(`${_.N.chatServer}/messages`,s).toPromise():this.socket.emit("new_message",s)}onNewMessage(){return this.socket.fromEvent("new_message")}clearSubscriptions(){this.subscriptions.map(s=>s.unsubscribe())}subscribeToNewMessages(){const s=this.onNewMessage().subscribe(d=>{this.setNewMessage(d),d.userId!=this.userService.currentUserValue.id&&(this.audioService.src="../../../assets/mp3/message.mp3",this.audioService.load(),this.audioService.play(),d.roomId!=this.currentRoomId&&this.unreadMessageCount.next(this.unreadMessageCount.value+1))});this.subscriptions.push(s)}emitNewRoomCreate(s){this.socket.emit("new_room",s)}}return p.\u0275fac=function(s){return new(s||p)(C.LFG(T.eN),C.LFG(g.sk),C.LFG(E.e))},p.\u0275prov=C.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},9470:(b,D,i)=>{i.d(D,{G:()=>R});var t=i(655),e=i(5e3),_=i(2466),C=i(263),T=i(3175),g=i(325),E=i(4401),h=i(8669),v=i(9808),P=i(2683),p=i(3087);function S(l,z){1&l&&(e.TgZ(0,"button",18),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.login"),""))}function s(l,z){1&l&&(e.TgZ(0,"button",20),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.register"),""))}function d(l,z){if(1&l){const c=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(c),e.oxw().goToDashboard()}),e._UZ(1,"i",22),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.dashboard"),""))}function m(l,z){if(1&l){const c=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(c),e.oxw().logout()}),e._UZ(1,"i",22),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.logout"),""))}function y(l,z){1&l&&(e.TgZ(0,"button",18),e._UZ(1,"i",23),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.login"),""))}function O(l,z){1&l&&(e.TgZ(0,"button",20),e._UZ(1,"i",23),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&l&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"header.register")," !"))}let R=(()=>{class l{constructor(c,u,M,A,B){var I;this.translationService=c,this.authService=u,this.cdr=M,this.chatService=A,this.router=B,this.language=null!==(I=localStorage.getItem("language"))&&void 0!==I?I:"en",this.unreadMessageCount=0}ngOnInit(){this.isConnected=!!this.authService.getToken(),this.chatService.unreadMessageCount.subscribe(c=>{this.unreadMessageCount=c}),this.cdr.markForCheck()}languageChange(c="en"){localStorage.setItem("language",c),this.translationService.use(c)}goToDashboard(){return(0,t.mG)(this,void 0,void 0,function*(){yield this.authService.populate();const c=this.authService.currentUserValue;"student"==c.role.slug?this.router.navigate(["student/dashboard"]):"teacher"==c.role.slug?this.router.navigate(["teacher/dashboard"]):"admin"==c.role.slug&&this.router.navigate(["admin"])})}goToMessages(){this.router.navigate(["/messages"])}logout(){this.authService.purgeAuth(),this.router.navigate(["/"])}}return l.\u0275fac=function(c){return new(c||l)(e.Y36(_.sK),e.Y36(C.e),e.Y36(e.sBO),e.Y36(T.a),e.Y36(g.F0))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-header"]],decls:34,vars:17,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-white","px-4","py-0"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/logo.png","width","60",1,"logo"],["id","navbarNav",1,"collapse","navbar-collapse","d-none","d-md-block"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","",1,"nav-link"],[1,"nav-link"],[1,"d-inline"],[1,"mx-3","pointer",3,"nzCount","click"],["icon","inbox-outline","pack","eva",1,"d-inline-block"],["size","small",1,"language-selector",3,"selected","selectedChange"],["selected","","value","en"],["value","fr"],["nbButton","","hero","","size","small","routerLink","/login","class","mx-2",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","routerLink","/register","class"," ml-2 mr-4",4,"ngIf"],["nbButton","","hero","","status","primary","size","small","class"," ml-2 mr-4",3,"click",4,"ngIf"],[1,"float-end","d-inline","d-md-none","mobile-menu"],["nbButton","","hero","","size","small","routerLink","/login",1,"mx-2"],["nz-icon","","nzType","user","nzTheme","outline",1,"mr-2"],["nbButton","","hero","","status","primary","size","small","routerLink","/register",1,"ml-2","mr-4"],["nbButton","","hero","","status","primary","size","small",1,"ml-2","mr-4",3,"click"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-icon","","nzType","user","nzTheme","outline",1,"mx-2"]],template:function(c,u){1&c&&(e.TgZ(0,"nav",0)(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"li",5)(10,"a",7),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"li",5)(14,"a",7),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"div",8)(18,"div",8)(19,"nz-badge",9),e.NdJ("click",function(){return u.goToMessages()}),e._UZ(20,"nb-icon",10),e.qZA()(),e.TgZ(21,"nb-select",11),e.NdJ("selectedChange",function(A){return u.languageChange(A)})("selectedChange",function(A){return u.language=A}),e.TgZ(22,"nb-option",12),e._uU(23,"\u{1f1ec}\u{1f1e7}"),e.qZA(),e.TgZ(24,"nb-option",13),e._uU(25,"\u{1f1eb}\u{1f1f7}"),e.qZA()(),e.YNc(26,S,4,3,"button",14),e.YNc(27,s,4,3,"button",15),e.YNc(28,d,4,3,"button",16),e.YNc(29,m,4,3,"button",16),e.qZA()(),e.TgZ(30,"div",17)(31,"div",8),e.YNc(32,y,4,3,"button",14),e.YNc(33,O,4,3,"button",15),e.qZA()()()),2&c&&(e.xp6(7),e.Oqu(e.lcZ(8,11,"header.home")),e.xp6(4),e.Oqu(e.lcZ(12,13,"header.about")),e.xp6(4),e.Oqu(e.lcZ(16,15,"header.contact")),e.xp6(4),e.Q6J("nzCount",u.unreadMessageCount),e.xp6(2),e.Q6J("selected",u.language),e.xp6(5),e.Q6J("ngIf",!u.isConnected),e.xp6(1),e.Q6J("ngIf",!u.isConnected),e.xp6(1),e.Q6J("ngIf",u.isConnected&&"/student/dashboard"!=u.router.url&&"/teacher/dashboard"!=u.router.url),e.xp6(1),e.Q6J("ngIf",u.isConnected&&("/student/dashboard"==u.router.url||"/teacher/dashboard"==u.router.url)),e.xp6(3),e.Q6J("ngIf",!u.isConnected),e.xp6(1),e.Q6J("ngIf",!u.isConnected))},directives:[g.yS,E.x7,h.fMN,h.rs,h.q51,v.O5,h.DPz,g.rH,P.w,p.Ls],pipes:[_.X$],styles:["a[_ngcontent-%COMP%]{text-decoration:none!important}.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#000}nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]  .language-selector{z-index:-1}[_nghost-%COMP%]  .ant-scroll-number-only-unit{font-weight:400;font-size:12px;line-height:20px;color:#fff!important}[_nghost-%COMP%]  .ant-badge-count{z-index:auto;min-width:20px;height:20px;padding:0 6px;white-space:nowrap;text-align:center;background:#45aca0;border-radius:10px;box-shadow:0 0 0 1px #fff}[_nghost-%COMP%]  i{transform:translateY(0)}"]}),l})()},4573:(b,D,i)=>{i.d(D,{OK:()=>A,hw:()=>L,t7:()=>x,wm:()=>U});var t=i(5e3),e=i(8929),_=i(7625),C=i(655),T=i(4090),g=i(1721),E=i(4219),h=i(925),v=i(9808),P=i(3087),p=i(226),S=i(5113);const s=["*"],d=["nz-sider-trigger",""];function m(o,a){}function y(o,a){if(1&o&&(t.ynx(0),t.YNc(1,m,0,0,"ng-template",3),t.BQk()),2&o){const n=t.oxw(),r=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",n.nzZeroTrigger||r)}}function O(o,a){}function R(o,a){if(1&o&&(t.ynx(0),t.YNc(1,O,0,0,"ng-template",3),t.BQk()),2&o){const n=t.oxw(),r=t.MAs(3);t.xp6(1),t.Q6J("ngTemplateOutlet",n.nzTrigger||r)}}function l(o,a){if(1&o&&t._UZ(0,"i",5),2&o){const n=t.oxw(2);t.Q6J("nzType",n.nzCollapsed?"right":"left")}}function z(o,a){if(1&o&&t._UZ(0,"i",5),2&o){const n=t.oxw(2);t.Q6J("nzType",n.nzCollapsed?"left":"right")}}function c(o,a){if(1&o&&(t.YNc(0,l,1,1,"i",4),t.YNc(1,z,1,1,"i",4)),2&o){const n=t.oxw();t.Q6J("ngIf",!n.nzReverseArrow),t.xp6(1),t.Q6J("ngIf",n.nzReverseArrow)}}function u(o,a){1&o&&t._UZ(0,"i",6)}function M(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(n);const f=t.oxw();return f.setCollapsed(!f.nzCollapsed)}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("matchBreakPoint",n.matchBreakPoint)("nzCollapsedWidth",n.nzCollapsedWidth)("nzCollapsed",n.nzCollapsed)("nzBreakpoint",n.nzBreakpoint)("nzReverseArrow",n.nzReverseArrow)("nzTrigger",n.nzTrigger)("nzZeroTrigger",n.nzZeroTrigger)("siderWidth",n.widthSetting)}}let A=(()=>{class o{constructor(n,r){this.elementRef=n,this.renderer=r,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.SBq),t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["nz-content"]],exportAs:["nzContent"],ngContentSelectors:s,decls:1,vars:0,template:function(n,r){1&n&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),o})(),Z=(()=>{class o{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=0===this.nzCollapsedWidth&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=0!==this.nzCollapsedWidth}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(n,r){2&n&&(t.Udp("width",r.isNormalTrigger?r.siderWidth:null),t.ekj("ant-layout-sider-trigger",r.isNormalTrigger)("ant-layout-sider-zero-width-trigger",r.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",r.isZeroTrigger&&r.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",r.isZeroTrigger&&!r.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],features:[t.TTD],attrs:d,decls:6,vars:2,consts:[[4,"ngIf"],["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(n,r){1&n&&(t.YNc(0,y,2,1,"ng-container",0),t.YNc(1,R,2,1,"ng-container",0),t.YNc(2,c,2,2,"ng-template",null,1,t.W1O),t.YNc(4,u,1,0,"ng-template",null,2,t.W1O)),2&n&&(t.Q6J("ngIf",r.isZeroTrigger),t.xp6(1),t.Q6J("ngIf",r.isNormalTrigger))},directives:[v.O5,v.tP,P.Ls],encapsulation:2,changeDetection:0}),o})(),x=(()=>{class o{constructor(n,r,f){this.platform=n,this.cdr=r,this.breakpointService=f,this.destroy$=new e.xQ,this.nzMenuDirective=null,this.nzCollapsedChange=new t.vpe,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null}updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:(0,g.WX)(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&"inline"===this.nzMenuDirective.nzMode&&0!==this.nzCollapsedWidth&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(n){n!==this.nzCollapsed&&(this.nzCollapsed=n,this.nzCollapsedChange.emit(n),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(T.ow,!0).pipe((0,_.R)(this.destroy$)).subscribe(n=>{const r=this.nzBreakpoint;r&&(0,g.ov)().subscribe(()=>{this.matchBreakPoint=!n[r],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(n){const{nzCollapsed:r,nzCollapsedWidth:f,nzWidth:N}=n;(r||f||N)&&this.updateStyleMap(),r&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(h.t4),t.Y36(t.sBO),t.Y36(T.r3))},o.\u0275cmp=t.Xpm({type:o,selectors:[["nz-sider"]],contentQueries:function(n,r,f){if(1&n&&t.Suo(f,E.wO,5),2&n){let N;t.iGM(N=t.CRH())&&(r.nzMenuDirective=N.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(n,r){2&n&&(t.Udp("flex",r.flexSetting)("max-width",r.widthSetting)("min-width",r.widthSetting)("width",r.widthSetting),t.ekj("ant-layout-sider-zero-width",r.nzCollapsed&&0===r.nzCollapsedWidth)("ant-layout-sider-light","light"===r.nzTheme)("ant-layout-sider-dark","dark"===r.nzTheme)("ant-layout-sider-collapsed",r.nzCollapsed)("ant-layout-sider-has-trigger",r.nzCollapsible&&null!==r.nzTrigger))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:"nzReverseArrow",nzCollapsible:"nzCollapsible",nzCollapsed:"nzCollapsed"},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],features:[t.TTD],ngContentSelectors:s,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click",4,"ngIf"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click"]],template:function(n,r){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA(),t.YNc(2,M,1,8,"div",1)),2&n&&(t.xp6(2),t.Q6J("ngIf",r.nzCollapsible&&null!==r.nzTrigger))},directives:[Z,v.O5],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,g.yF)()],o.prototype,"nzReverseArrow",void 0),(0,C.gn)([(0,g.yF)()],o.prototype,"nzCollapsible",void 0),(0,C.gn)([(0,g.yF)()],o.prototype,"nzCollapsed",void 0),o})(),L=(()=>{class o{constructor(n){this.directionality=n,this.dir="ltr",this.destroy$=new e.xQ}ngOnInit(){var n;this.dir=this.directionality.value,null===(n=this.directionality.change)||void 0===n||n.pipe((0,_.R)(this.destroy$)).subscribe(r=>{this.dir=r})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(p.Is,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["nz-layout"]],contentQueries:function(n,r,f){if(1&n&&t.Suo(f,x,4),2&n){let N;t.iGM(N=t.CRH())&&(r.listOfNzSiderComponent=N)}},hostAttrs:[1,"ant-layout"],hostVars:4,hostBindings:function(n,r){2&n&&t.ekj("ant-layout-rtl","rtl"===r.dir)("ant-layout-has-sider",r.listOfNzSiderComponent.length>0)},exportAs:["nzLayout"],ngContentSelectors:s,decls:1,vars:0,template:function(n,r){1&n&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),o})(),U=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.vT,v.ez,P.PV,S.xu,h.ud]]}),o})()}}]);